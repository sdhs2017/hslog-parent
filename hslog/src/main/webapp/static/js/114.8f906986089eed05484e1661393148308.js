webpackJsonp([114],{"ULS+":function(e,t){},jOcl:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("576z"),s=a("/sA3"),n={name:"fulltextRetrieval",data:function(){return{dateVal:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}},{text:"全部",onClick:function(e){e.$emit("pick",["",""])}}]},layerObj:{detailData:{},layerState:!1},words:"",searchConditions:{words:""},searchUrl:"ecsWinlog/getLogListByContent.do",tableHead:[],firstSearch:!0}},created:function(){var e=this,t=Object(s.e)("yyyy-mm-dd HH:MM:SS",new Date),a=new Date;a.setTime(a.getTime()-864e5*this.$store.state.beforeDay),a=Object(s.e)("yyyy-mm-dd HH:MM:SS",a),this.dateVal=[a,t],this.searchConditions={words:"",endtime:t,starttime:a},this.tableHead=[{prop:"@timestamp",label:"时间",width:"150"},{prop:"log.level",label:"级别",width:"100"},{prop:"agent.type",label:"日志类型",width:"100"},{prop:"fields.equipmentname",label:"资产名称",width:"125",clickFun:function(t){"unknown"===t.equipmentid?layer.msg("资产未知",{icon:5}):e.$router.push({name:"equipment2",params:{equipmentid:t.fields.equipmentid}})}},{prop:"fields.ip",label:"IP",width:"125"},{prop:"message",label:"日志内容",width:""},{prop:"tools",label:"操作",width:"50",btns:[{icon:"el-icon-tickets",text:"查看详情",btnType:"readDetails",clickFun:function(t,a){e.layerObj.layerState=!0,e.layerObj.detailData=t}}]}],void 0!==this.$route.params.words&&(this.words=this.$route.params.words,this.searchConditions=this.$route.params)},watch:{$route:function(e,t){this.$route.params.words&&(this.words=this.$route.params.words,this.searchConditions=this.$route.params)}},methods:{searchLogs:function(){this.searchConditions={words:this.words,starttime:this.dateVal[0],endtime:this.dateVal[1]}},timeChange:function(){this.searchLogs()},goToEquipment:function(){console.log("ddd")}},components:{vLogscontent2:i.default}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-bg"},[a("div",{staticClass:"top-title"},[e._v("全文检索\n        "),a("el-date-picker",{staticClass:"date-wapper",attrs:{type:"datetimerange","range-separator":"至",size:"mini",clearable:!1,"start-placeholder":"开始日期","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.timeChange},model:{value:e.dateVal,callback:function(t){e.dateVal=t},expression:"dateVal"}})],1),e._v(" "),a("div",{staticClass:"search-wapper"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,onsubmit:"return false"}},[a("el-form-item",[a("el-input",{staticClass:"input-searchword",attrs:{placeholder:"输入条件检索日志"},model:{value:e.words,callback:function(t){e.words=t},expression:"words"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.searchLogs()}}},[a("i",{staticClass:"el-icon-search"}),e._v("查询")])],1)],1)],1),e._v(" "),a("div",{staticClass:"content-wapper"},[a("v-logscontent2",{attrs:{searchConditions:e.searchConditions,tableHead:e.tableHead,searchUrl:e.searchUrl,layerObj:e.layerObj}})],1)])},staticRenderFns:[]};var o=a("VU/8")(n,r,!1,function(e){a("ULS+")},"data-v-0c288eaa",null);t.default=o.exports}});