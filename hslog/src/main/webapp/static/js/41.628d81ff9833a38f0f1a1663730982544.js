webpackJsonp([41],{BYea:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={name:"property",data:function(){return{leftLoading:!1,rightLoading:!1,propTree:{children:"menus",label:"menuName"},propData:[],currentIndex:"0",currentName:"",tableHead:[{children:[],formatter:"",label:"字段名",prop:"fieldName",width:200},{children:[],formatter:"toLowcase",label:"数据类型",prop:"fieldType",width:0},{children:[],formatter:"changeVal",label:"是否可聚合",prop:"fieldData",width:0},{children:[],formatter:"",label:"格式",prop:"format",width:0},{children:[],formatter:"toLowcase",label:"存储分词器",prop:"analyzer",width:0},{children:[],formatter:"toLowcase",label:"查询分词器",prop:"searchAnalyzer",width:0},{children:[{children:[],formatter:"toLowcase",label:"数据类型",prop:"rawType",width:0},{children:[],formatter:"toEmpty",label:"限制长度",prop:"rawIgnoreAbove",width:0}],formatter:"toLowcase1",label:"Raw",prop:"Raw",width:0}],tableDataArr:[],tableHeight:"",currentType:""}},created:function(){var t=this;this.getTreeData(),this.tableHeight=document.body.clientHeight-320,window.onresize=function(){t.tableHeight=document.body.clientHeight-320}},methods:{chooseIndex:function(t,e){this.currentIndex=e,this.currentName=t,this.getProps(this.currentName)},getProps:function(t,e){var a=this;this.$nextTick(function(){a.rightLoading=!0,a.$axios.post(a.$baseUrl+t,a.$qs.stringify(e)).then(function(t){a.rightLoading=!1,a.tableDataArr=[],setTimeout(function(){a.tableDataArr=t.data},10)}).catch(function(t){a.rightLoading=!1})})},toLowcase:function(t,e,a,r){return a?a.toLowerCase():a},toEmpty:function(t,e,a,r){if("0"==a)return""},changeVal:function(t,e,a,r){return 1==a?"是":0==a?"否":a},nodeClick:function(t){if(this.currentName=t.menuName,1==t.state){this.currentType="template";var e={id:"",template:t.id};this.getProps("/metadata/getMedataByTemplateDynamically.do",e)}else if(2==t.state){this.currentType="index";var a={index:t.id};this.getProps("/metadata/getMedataByIndexDynamically.do",a)}},getTreeData:function(){var t=this;this.$nextTick(function(){t.leftLoading=!0,t.$axios.post(t.$baseUrl+"/metadata/getIndexTree.do","").then(function(e){t.leftLoading=!1,t.propData=e.data}).catch(function(e){t.leftLoading=!1})})},load:function(t,e,a){var r=this,i="",o={};"template"===this.currentType?(i="/metadata/getMedataByTemplateDynamically.do",o={id:t.id,template:this.currentName}):(i="/metadata/getMedataByIndexDynamically.do",o={id:t.id,index:this.currentName}),this.$nextTick(function(){r.rightLoading=!0,r.$axios.post(r.$baseUrl+i,r.$qs.stringify(o)).then(function(t){r.rightLoading=!1,a(t.data)}).catch(function(t){r.rightLoading=!1,console.log("获取失败")})})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-bg"},[a("div",{staticClass:"top-title"},[t._v("元数据")]),t._v(" "),a("div",{staticClass:"prop-wapper"},[a("div",{staticClass:"left-wapper"},[a("div",{staticClass:"left-tit"},[t._v("数据库")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.leftLoading,expression:"leftLoading"}],staticClass:"left-list",attrs:{"element-loading-background":"rgba(48, 62, 78, 0.5)"}},[a("el-tree",{attrs:{props:t.propTree,data:t.propData},on:{"node-click":t.nodeClick}})],1)]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.rightLoading,expression:"rightLoading"}],staticClass:"right-wapper",attrs:{"element-loading-background":"rgba(48, 62, 78, 0.5)"}},[a("h3",{staticClass:"table-tit"},[t._v(t._s(t.currentName)+" ")]),t._v(" "),a("el-table",{staticClass:"table-box",staticStyle:{width:"100%"},attrs:{data:this.tableDataArr,border:!0,stripe:"",lazy:"",load:t.load,height:this.tableHeight,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"fieldName",label:"字段名",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fieldType",label:"数据类型",formatter:t.toLowcase,width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"fieldData",label:"是否可聚合"}}),t._v(" "),a("el-table-column",{attrs:{prop:"format",label:"格式"}}),t._v(" "),a("el-table-column",{attrs:{prop:"analyzer",formatter:t.toLowcase,label:"存储分词器"}}),t._v(" "),a("el-table-column",{attrs:{prop:"searchAnalyzer",formatter:t.toLowcase,label:"查询分词器"}}),t._v(" "),a("el-table-column",{attrs:{label:"Raw"}},[a("el-table-column",{attrs:{prop:"rawType",formatter:t.toLowcase,label:"数据类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"rawIgnoreAbove",label:"限制长度",formatter:t.toEmpty}})],1)],1)],1)])])},staticRenderFns:[]};var o=a("VU/8")(r,i,!1,function(t){a("yjWV")},"data-v-8ff0a1fc",null);e.default=o.exports},yjWV:function(t,e){}});