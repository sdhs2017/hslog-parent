webpackJsonp([82],{"9GtC":function(e,i){},y5Xj:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=t("mvHQ"),n=t.n(a),s=t("/sA3"),o={name:"systemConfig_SR",data:function(){return{loading:!1,config:{disk_system_watermark:"",es_storage_day:"90",disk_data_watermark:"80",disk_data_watermark_high:"95",pwd_expire_day:"7",pwd_length:"8",pwd_complex:["数字","字母"],pwd_try:"5",session_timeout:"10",ip_black:"",es_bulk:"",concurrent_requests:""}}},created:function(){this.getConfig()},methods:{subConfig:function(){var e=this;if(this.config.es_storage_day<90)return layer.msg("日志存储日志不少于90天",{icon:5}),!1;if(this.config.pwd_expire_day<1)return layer.msg("密码过期时间需大于0",{icon:5}),!1;if(this.config.pwd_length<8)return layer.msg("密码长度不小于8位",{icon:5}),!1;if(this.config.pwd_complex.length<2)return layer.msg("密码复杂度至少选择两种组合",{icon:5}),!1;if(this.config.pwd_try<1)return layer.msg("密码尝试次数范围1-5",{icon:5}),!1;if(this.config.pwd_try>5)return layer.msg("密码尝试次数范围1-5",{icon:5}),!1;if(this.config.session_timeout<1)return layer.msg("登陆超时时间需大于0",{icon:5}),!1;if(this.config.es_bulk<1)return layer.msg("批量采集数需大于0",{icon:5}),!1;if(this.config.concurrent_requests<1)return layer.msg("并发采集数需大于0",{icon:5}),!1;var i=JSON.parse(n()(this.config));i.pwd_complex=n()(i.pwd_complex),console.log(i),this.$nextTick(function(){e.loading=!0,e.$axios.post(e.$baseUrl+"/configuration/update.do",e.$qs.stringify(i)).then(function(i){e.loading=!1;var t=i.data;"true"==t.success?(layer.msg(i.data.message,{icon:1}),e.getConfig()):layer.msg(t.message,{icon:5})}).catch(function(i){e.loading=!1})})},getConfig:function(){var e=this;this.$nextTick(function(){e.loading=!0,e.$axios.post(e.$baseUrl+"/configuration/selectAll.do",e.$qs.stringify()).then(function(i){e.loading=!1;var t=i.data;if("true"==t.success){var a=t.data;for(var n in a)"es_storage_day"===a[n].configuration_key?e.config.es_storage_day=a[n].configuration_value:"disk_data_watermark"===a[n].configuration_key?e.config.disk_data_watermark=a[n].configuration_value:"disk_data_watermark_high"===a[n].configuration_key?e.config.disk_data_watermark_high=a[n].configuration_value:"pwd_expire_day"===a[n].configuration_key?e.config.pwd_expire_day=a[n].configuration_value:"pwd_length"===a[n].configuration_key?e.config.pwd_length=a[n].configuration_value:"pwd_try"===a[n].configuration_key?e.config.pwd_try=a[n].configuration_value:"session_timeout"===a[n].configuration_key?e.config.session_timeout=a[n].configuration_value:"ip_black"===a[n].configuration_key?e.config.ip_black=a[n].configuration_value:"pwd_complex"===a[n].configuration_key?e.config.pwd_complex=JSON.parse(a[n].configuration_value):"disk_system_watermark"===a[n].configuration_key?e.config.disk_system_watermark=JSON.parse(a[n].configuration_value):"es_bulk"===a[n].configuration_key?e.config.es_bulk=JSON.parse(a[n].configuration_value):"concurrent_requests"===a[n].configuration_key&&(e.config.concurrent_requests=JSON.parse(a[n].configuration_value));Object(s.o)(e.config.pwd_length,e.config.pwd_complex)}else layer.msg(t.message,{icon:5})}).catch(function(i){e.loading=!1})})}}},r={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"content-bg",attrs:{"element-loading-background":"rgba(48, 62, 78, 0.5)"}},[t("div",{staticClass:"top-title"},[e._v("系统配置")]),e._v(" "),t("div",{staticClass:"wapper-con"},[t("div",[t("el-form",{staticClass:"form-wapper"},[t("el-form-item",{attrs:{label:"数据存储周期(不少于90天)"}},[t("el-input",{staticClass:"item",attrs:{size:"mini",min:"90",type:"number",placeholder:"日志存储时间不小于90天"},model:{value:e.config.es_storage_day,callback:function(i){e.$set(e.config,"es_storage_day",i)},expression:"config.es_storage_day"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"系统盘阈值"}},[t("div",{staticStyle:{display:"flex","margin-top":"32px"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.config.disk_system_watermark,expression:"config.disk_system_watermark"}],staticStyle:{width:"100%"},attrs:{type:"range",size:"mini",min:"0",step:"1",max:"100"},domProps:{value:e.config.disk_system_watermark},on:{__r:function(i){return e.$set(e.config,"disk_system_watermark",i.target.value)}}}),e._v(" "),t("span",[e._v(e._s(e.config.disk_system_watermark)+"%")])])]),e._v(" "),t("el-form-item",{attrs:{label:"数据盘阈值（将满)"}},[t("div",{staticStyle:{display:"flex","margin-top":"32px"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.config.disk_data_watermark,expression:"config.disk_data_watermark"}],staticStyle:{width:"100%"},attrs:{type:"range",size:"mini",min:"0",step:"1",max:"100"},domProps:{value:e.config.disk_data_watermark},on:{__r:function(i){return e.$set(e.config,"disk_data_watermark",i.target.value)}}}),e._v(" "),t("span",[e._v(e._s(e.config.disk_data_watermark)+"%")])])]),e._v(" "),t("el-form-item",{attrs:{label:"数据盘阈值（已满）"}},[t("div",{staticStyle:{display:"flex","margin-top":"32px"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.config.disk_data_watermark_high,expression:"config.disk_data_watermark_high"}],staticStyle:{width:"100%"},attrs:{type:"range",size:"mini",min:"10",step:"1",max:"100"},domProps:{value:e.config.disk_data_watermark_high},on:{__r:function(i){return e.$set(e.config,"disk_data_watermark_high",i.target.value)}}}),e._v(" "),t("span",[e._v(e._s(e.config.disk_data_watermark_high)+"%")])])]),e._v(" "),t("el-form-item",{attrs:{label:"数据批量采集"}},[t("el-input",{attrs:{size:"mini",type:"number",min:"1"},model:{value:e.config.es_bulk,callback:function(i){e.$set(e.config,"es_bulk",i)},expression:"config.es_bulk"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"并发采集数"}},[t("el-input",{attrs:{size:"mini",type:"number",min:"1"},model:{value:e.config.concurrent_requests,callback:function(i){e.$set(e.config,"concurrent_requests",i)},expression:"config.concurrent_requests"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码过期时间（天）"}},[t("el-input",{staticClass:"item",attrs:{min:"1",type:"number",size:"mini"},model:{value:e.config.pwd_expire_day,callback:function(i){e.$set(e.config,"pwd_expire_day",i)},expression:"config.pwd_expire_day"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码长度（不少于8位）"}},[t("el-input",{staticClass:"item",attrs:{min:"8",type:"number",size:"mini"},model:{value:e.config.pwd_length,callback:function(i){e.$set(e.config,"pwd_length",i)},expression:"config.pwd_length"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码复杂度（至少选择其中两项）"}},[t("p",{staticStyle:{"margin-top":"32px"}},[t("el-checkbox-group",{model:{value:e.config.pwd_complex,callback:function(i){e.$set(e.config,"pwd_complex",i)},expression:"config.pwd_complex"}},[t("el-checkbox",{attrs:{label:"数字"}}),e._v(" "),t("el-checkbox",{attrs:{label:"字母"}}),e._v(" "),t("el-checkbox",{attrs:{label:"符号"}})],1)],1)]),e._v(" "),t("el-form-item",{attrs:{label:"密码尝试次数（1-5次）"}},[t("el-input",{staticClass:"item",attrs:{min:"1",max:"5",type:"number",size:"mini"},model:{value:e.config.pwd_try,callback:function(i){e.$set(e.config,"pwd_try",i)},expression:"config.pwd_try"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"登录超时时间（分钟）"}},[t("el-input",{staticClass:"item",attrs:{min:"1",type:"number",size:"mini"},model:{value:e.config.session_timeout,callback:function(i){e.$set(e.config,"session_timeout",i)},expression:"config.session_timeout"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"IP黑名单(多个IP用“,”隔开)"}},[t("el-input",{staticClass:"item",attrs:{size:"mini"},model:{value:e.config.ip_black,callback:function(i){e.$set(e.config,"ip_black",i)},expression:"config.ip_black"}})],1)],1),e._v(" "),t("div",{staticClass:"btn-wapper"},[t("el-button",{attrs:{type:"primary"},on:{click:e.subConfig}},[e._v("确定")])],1)],1)])])},staticRenderFns:[]};var c=t("VU/8")(o,r,!1,function(e){t("9GtC")},"data-v-3d7662be",null);i.default=c.exports}});