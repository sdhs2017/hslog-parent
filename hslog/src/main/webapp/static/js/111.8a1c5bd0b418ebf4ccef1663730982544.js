webpackJsonp([111],{Vdss:function(e,t){},jR40:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("mvHQ"),i=o.n(a),l=o("ID1p"),r=o("62NR"),n=(o("/sA3"),o("8+FI")),s={name:"reportModel",components:{vSearchForm:l.default,vBasetable:r.default},data:function(){var e=this;return{loading:!1,treeLoading:!1,leftLoading:!1,addDialogFormVisible:!1,addFrom:{reportModelName:"",reportModelType:"",reportModelHeader:"",reportModelfooter:"",dashboardID:"",reportModelExplain:"",extendReportModelID:""},reportModelTypeOpt:[{label:"日报",value:"day"},{label:"周报",value:"week"},{label:"月报",value:"month"}],formConditionsArr:[],searchConditions:{reportModelName:"",reportModelType:""},saveCondition:"",busName:"reportModelSearch",tableBusNames:{selectionName:"tableSelectedBusName"},selectReportModelArr:[],allCounts:0,page:1,c_page:1,size:15,tableHead:[{prop:"reportModelName",label:"报告名称",width:""},{prop:"reportModelType_CN",label:"报告类型",width:""},{prop:"reportModelExplain",label:"报告说明",width:""},{prop:"tools",label:"操作",width:"",btns:[{icon:"el-icon-view",text:"修改",clickFun:function(t,o){e.selectReportModelArr=[],e.dialogType="see",e.selectReportModelArr.push(t),e.getReportInfo(t)}}]}],tableData:[],dialogFormVisible:!1,dialogTitle:"修改报告模板",dialogType:"see",activeName:"first",dialogInfo:{reportModel:{},reportModelInfo:[]},defaultProps:{children:"children",label:"name"},nodeName:"",nodeLevel:"",btnDisabled:!0,nodeForm:{},nodeOldForm:{},contentTypeOpt:[{label:"标题",value:"title"},{label:"正文文本",value:"text"},{label:"表格",value:"table"},{label:"图表",value:"image"}],alignmentOpt:[{label:"居左",value:0},{label:"居中",value:1},{label:"居右",value:2}],dashboardIDOpt:[],inheritModelOpt:[],tableIdOpt:[],imgIdOpt:[],textContentArr:[{text:"",metricID:""}],metricOpt:[]}},mounted:function(){},created:function(){var e=this;this.getReportModelList(this.searchConditions,1),this.getDashboardIdList(),this.formConditionsArr=[{label:"报告名称",paramName:"reportModelName",model:{model:""},itemType:"",type:"input"},{label:"报告类型",paramName:"reportModelType",type:"select",itemType:"",model:{model:""},options:this.reportModelTypeOpt}],n.default.$on(this.busName,function(t){e.searchConditions=t,e.getReportModelList(e.searchConditions,1),e.c_page=1,e.selectReportModelArr=[]}),n.default.$on(this.tableBusNames.selectionName,function(t){e.selectReportModelArr=t})},watch:{dialogFormVisible:function(){this.dialogFormVisible?this.nodeOldForm=i()(this.nodeForm):(this.nodeForm={},this.activeName="first",this.nodeName="",this.btnDisabled=!0,this.getReportModelList(this.searchConditions,this.c_page),this.selectReportModelArr=[])},nodeForm:{handler:function(e,t){i()(e)==this.nodeOldForm?this.btnDisabled=!0:this.btnDisabled=!1},deep:!0}},methods:{addModel:function(){var e=this;this.$nextTick(function(){e.loading=!0,e.$axios.post(e.$baseUrl+"/reportModel/insertReportModel.do",e.$qs.stringify(e.addFrom)).then(function(t){e.loading=!1;var o=t.data;"true"==o.success?(layer.msg(o.message,{icon:1}),e.getReportModelList(e.searchConditions,1),e.c_page=1,e.addDialogFormVisible=!1):layer.msg(o.message,{icon:5})}).catch(function(t){e.loading=!1})})},removeModel:function(){var e=this;if(0===this.selectReportModelArr.length)layer.msg("未选中表格中的报告模板",{icon:5});else{var t="";this.selectReportModelArr.forEach(function(e){t+=e.reportModelID+","}),layer.confirm("您确定删除么？",{btn:["确定","取消"]},function(o){e.loading=!0,e.$nextTick(function(){e.$axios.post(e.$baseUrl+"/reportModel/deleteReportModel.do",e.$qs.stringify({reportModelIDs:t})).then(function(t){e.loading=!1;var o=t.data;"true"==o.success?(layer.msg(o.message,{icon:1}),e.getReportModelList(e.searchConditions,1),e.c_page=1,e.addDialogFormVisible=!1,e.selectReportModelArr=[]):layer.msg(o.message,{icon:5})}).catch(function(t){e.loading=!1})})})}},getReportModelList:function(e,t){var o=this;this.loading=!0;var a=e;a.pageIndex=t,a.pageSize=this.size,this.c_page=t,this.$nextTick(function(){o.$axios.post(o.$baseUrl+"/reportModel/getReportModelListByPage.do",o.$qs.stringify(a)).then(function(e){o.loading=!1;var t=e.data;"true"==t.success?(o.tableData=t.data.reportModelList,o.allCounts=JSON.parse(t.data.count)):layer.msg(t.message,{icon:5})}).catch(function(e){o.loading=!1,console.log(e)})})},getReportInfo:function(e){var t=this;this.$nextTick(function(){t.loading=!0,t.$axios.post(t.$baseUrl+"/reportModel/getReportModelInfoAll.do",t.$qs.stringify({reportModelID:e.reportModelID})).then(function(e){t.loading=!1;var o=e.data;"true"==o.success?(t.dialogInfo=o.data,t.dialogFormVisible=!0,t.getTableList(),t.getImgList(),t.getMetricList()):layer.msg(o.message,{icon:5})}).catch(function(e){t.loading=!1})})},reviseReportModel:function(){0===this.selectReportModelArr.length?layer.msg("未选中表格中的报告模板",{icon:5}):this.selectReportModelArr.length>1?layer.msg("只可以选中一个报告模板修改",{icon:5}):(this.dialogType="resive",this.getReportInfo(this.selectReportModelArr[0]))},getDashboardIdList:function(){var e=this;this.$nextTick(function(){e.$axios.post(e.$baseUrl+"/reportModel/getAllDashboardList.do",e.$qs.stringify()).then(function(t){var o=t.data;"true"==o.success?e.dashboardIDOpt=o.data:layer.msg(o.message,{icon:5})}).catch(function(e){})})},dashboardChange:function(){this.getInheritModelList(),this.addFrom.extendReportModelID=""},getInheritModelList:function(){var e=this;this.$nextTick(function(){e.$axios.post(e.$baseUrl+"/reportModel/getReportModelListByDashboardID_ReportModelAdd.do",e.$qs.stringify({dashboardID:e.addFrom.dashboardID})).then(function(t){var o=t.data;"true"==o.success?e.inheritModelOpt=o.data:layer.msg(o.message,{icon:5})}).catch(function(e){})})},getTableList:function(){var e=this;this.$nextTick(function(){e.treeLoading=!0,e.$axios.post(e.$baseUrl+"/reportModel/getTablesByDashboardID.do",e.$qs.stringify({dashboardID:e.dialogInfo.reportModel.dashboardID})).then(function(t){e.treeLoading=!1;var o=t.data;"true"==o.success?e.tableIdOpt=o.data:layer.msg(o.message,{icon:5})}).catch(function(t){e.treeLoading=!1})})},getImgList:function(){var e=this;this.$nextTick(function(){e.treeLoading=!0,e.$axios.post(e.$baseUrl+"/reportModel/getImagesByDashboardID.do",e.$qs.stringify({dashboardID:e.dialogInfo.reportModel.dashboardID})).then(function(t){e.treeLoading=!1;var o=t.data;"true"==o.success?e.imgIdOpt=o.data:layer.msg(o.message,{icon:5})}).catch(function(t){e.treeLoading=!1})})},getMetricList:function(){var e=this;this.$nextTick(function(){e.treeLoading=!0,e.$axios.post(e.$baseUrl+"/reportModel/getMetricsByDashboardID.do",e.$qs.stringify({dashboardID:e.dialogInfo.reportModel.dashboardID})).then(function(t){e.treeLoading=!1;var o=t.data;"true"==o.success?(e.metricOpt=o.data,e.metricOpt.unshift({label:"无",value:""})):layer.msg(o.message,{icon:5})}).catch(function(t){e.treeLoading=!1})})},handleCurrentChange:function(e){this.getReportModelList(this.searchConditions,e),this.c_page=e},nodeClick:function(e,t,o){var a=this;this.nodeLevel=t.level,this.nodeName=e.name,this.$nextTick(function(){a.treeLoading=!0,a.$axios.post(a.$baseUrl+"/reportModel/getReportModelInfoByReportModelInfoID.do",a.$qs.stringify({reportModelInfoID:e.id})).then(function(e){a.treeLoading=!1;var t=e.data;"true"==t.success?(a.nodeForm=t.data,a.textContentArr=[],"text"===a.nodeForm.contentType&&(a.textContentArr=JSON.parse(a.nodeForm.content)),a.nodeOldForm=i()(a.nodeForm)):layer.msg(t.message,{icon:5})}).catch(function(e){a.treeLoading=!1})})},contentTypeChange:function(){this.nodeForm.imageName="",this.nodeForm.tableName="",this.nodeForm.content="","table"===this.nodeForm.contentType?this.getTableList():"image"===this.nodeForm.contentType?this.getImgList():"text"===this.nodeForm.contentType&&this.getMetricList()},sendBaseInfo:function(){var e=this;this.$nextTick(function(){e.treeLoading=!0,e.$axios.post(e.$baseUrl+"/reportModel/updateReportModelByReportModelID.do",e.$qs.stringify(e.dialogInfo.reportModel)).then(function(t){e.treeLoading=!1;var o=t.data;"true"==o.success?(layer.msg(o.message,{icon:1}),e.getReportModelList(e.searchConditions,e.c_page)):layer.msg(o.message,{icon:5})}).catch(function(t){e.treeLoading=!1})})},putResive:function(){var e=this;this.nodeForm.titleLevel=this.nodeLevel,"text"===this.nodeForm.contentType&&(this.nodeForm.content=i()(this.textContentArr)),this.$nextTick(function(){e.loading=!0,e.$axios.post(e.$baseUrl+"/reportModel/updateReportModelInfoByReportModelInfoID.do",e.$qs.stringify(e.nodeForm)).then(function(t){e.loading=!1;var o=t.data;"true"==o.success?(layer.msg(o.message,{icon:1}),e.nodeForm={},e.nodeName="",e.nodeOldForm=i()(e.nodeForm),e.btnDisabled=!0,e.getReportInfo(e.selectReportModelArr[0])):layer.msg(o.message,{icon:5})}).catch(function(t){e.loading=!1})})},handleDrop:function(e,t,o,a){var l=this,r=[],n="inner"!=o?t.parent.data:t.data,s=1==t.level&&"inner"!=o?n:n.children;s.forEach(function(e){e.pid=n.id?n.id:""}),s.forEach(function(e,t){var o={deptId:e.id,parentDeptId:e.pid,order:t};r.push(o)}),this.$nextTick(function(){l.leftLoading=!0,l.$axios.post(l.$baseUrl+"/reportModel/UpdateTreeOrder.do",l.$qs.stringify({nodeList:i()(r)})).then(function(e){l.leftLoading=!1;var t=e.data;"true"==t.success||(layer.msg(t.message,{icon:5}),l.getReportInfo(l.selectReportModelArr[0]))}).catch(function(e){l.leftLoading=!1})})},appendNode:function(e,t){var o=this,a={};t?a={reportModelID:this.selectReportModelArr[0].reportModelID,parentID:"",orderCode:e.length}:(e.children||this.$set(e,"children",[]),a={reportModelID:this.selectReportModelArr[0].reportModelID,parentID:e.id,orderCode:e.children.length}),this.$nextTick(function(){o.leftLoading=!0,o.$axios.post(o.$baseUrl+"/reportModel/insertReportModelInfo.do",o.$qs.stringify(a)).then(function(a){o.leftLoading=!1;var i=a.data;if("true"==i.success){var l={};l.id=i.data.reportModelInfoID,l.name=i.data.content,t?e.push(l):e.children.push(l)}else layer.msg(i.message,{icon:5}),o.getReportInfo(o.selectReportModelArr[0])}).catch(function(e){o.leftLoading=!1})})},deleteNode:function(e){var t=this;e.children&&0!==e.children.length?layer.msg("该节点存在子集，无法删除",{icon:5}):layer.confirm("您确定删除么？",{btn:["确定","取消"]},function(o){t.leftLoading=!0,t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/reportModel/deleteReportModelInfo.do",t.$qs.stringify({reportModelInfoID:e.id})).then(function(e){t.leftLoading=!1;var o=e.data;"true"==o.success?(t.nodeForm={},t.nodeName="",layer.msg(o.message,{icon:1}),t.getReportInfo(t.selectReportModelArr[0])):(layer.msg(o.message,{icon:5}),t.getReportInfo(t.selectReportModelArr[0]))}).catch(function(e){t.leftLoading=!1})})})},addText:function(){this.textContentArr.push({text:"",metricID:""}),this.btnDisabled=!1},textConChange:function(){this.btnDisabled=!1}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content-bg"},[o("div",{staticClass:"top-title"},[e._v("报告模板")]),e._v(" "),o("div",{staticClass:"tools-btns"},[o("el-button",{attrs:{type:"success",size:"mini",plain:""},on:{click:function(t){e.addDialogFormVisible=!0}}},[e._v("添加")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.reviseReportModel}},[e._v("修改")]),e._v(" "),o("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:e.removeModel}},[e._v("删除")])],1),e._v(" "),o("div",{staticClass:"report-tools-form"},[o("v-search-form",{attrs:{formItem:e.formConditionsArr,busName:e.busName}})],1),e._v(" "),o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-wapper",attrs:{"element-loading-background":"rgba(48, 62, 78, 0.5)"}},[o("v-basetable",{attrs:{selection:!0,tableHead:e.tableHead,tableData:e.tableData,busName:e.tableBusNames}})],1),e._v(" "),o("div",{staticClass:"table-page"},[o("span",[e._v("共检索到报告模板为 "),o("b",[e._v(e._s(e.allCounts))]),e._v(" 个")]),e._v(" "),o("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.c_page,"page-size":e.size,total:e.allCounts},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.c_page=t},"update:current-page":function(t){e.c_page=t}}})],1),e._v(" "),o("el-dialog",{attrs:{title:"添加报告模板-基础信息",visible:e.addDialogFormVisible,width:"650px","close-on-click-modal":!1,top:"5vh"},on:{"update:visible":function(t){e.addDialogFormVisible=t}}},[o("div",{staticClass:"dialog-content",staticStyle:{height:"400px"}},[o("el-form",{staticStyle:{background:"#3b4d60",padding:"10px",position:"relative"},attrs:{model:e.dialogInfo,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"报告名称"}},[o("span",{staticStyle:{color:"red",position:"absolute",left:"-10px"}},[e._v("*")]),e._v(" "),o("el-input",{attrs:{size:"mini"},model:{value:e.addFrom.reportModelName,callback:function(t){e.$set(e.addFrom,"reportModelName",t)},expression:"addFrom.reportModelName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"报告类型"}},[o("span",{staticStyle:{color:"red",position:"absolute",left:"-10px"}},[e._v("*")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"报告类型"},model:{value:e.addFrom.reportModelType,callback:function(t){e.$set(e.addFrom,"reportModelType",t)},expression:"addFrom.reportModelType"}},e._l(e.reportModelTypeOpt,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"页眉"}},[o("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.addFrom.reportModelHeader,callback:function(t){e.$set(e.addFrom,"reportModelHeader",t)},expression:"addFrom.reportModelHeader"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"页脚"}},[o("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.addFrom.reportModelFooter,callback:function(t){e.$set(e.addFrom,"reportModelFooter",t)},expression:"addFrom.reportModelFooter"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"仪表板"}},[o("span",{staticStyle:{color:"red",position:"absolute",left:"-10px"}},[e._v("*")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"仪表板ID"},on:{change:function(t){return e.dashboardChange()}},model:{value:e.addFrom.dashboardID,callback:function(t){e.$set(e.addFrom,"dashboardID",t)},expression:"addFrom.dashboardID"}},e._l(e.dashboardIDOpt,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"继承模板"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"无"},model:{value:e.addFrom.extendReportModelID,callback:function(t){e.$set(e.addFrom,"extendReportModelID",t)},expression:"addFrom.extendReportModelID"}},e._l(e.inheritModelOpt,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("p",{staticStyle:{color:"#ff9e25","font-size":"10px",position:"relative",top:"-10px","padding-left":"80px"}},[e._v("注：新增模板内容是否继承于已存在的模板，无表示新建自定义空模板")]),e._v(" "),o("el-form-item",{staticClass:"explainWapper",attrs:{label:"说明"}},[o("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.addFrom.reportModelExplain,callback:function(t){e.$set(e.addFrom,"reportModelExplain",t)},expression:"addFrom.reportModelExplain"}})],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.addDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary",disabled:(""===e.addFrom.reportModelName||""===e.addFrom.reportModelType||""===e.addFrom.dashboardID)&&"disabled"},on:{click:e.addModel}},[e._v("提 交")])],1)]),e._v(" "),o("el-dialog",{attrs:{title:"see"===e.dialogType?"查看报告模板":"修改报告模板",visible:e.dialogFormVisible,width:"1000px","close-on-click-modal":!1,top:"5vh"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("div",{staticClass:"dialog-content"},[o("el-tabs",{staticStyle:{height:"95%"},attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"基本信息",name:"first"}},[o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"baseInfo",staticStyle:{height:"100%",display:"flex","justify-content":"center"},attrs:{"element-loading-background":"rgba(48, 62, 78, 0.5)"}},[o("el-form",{staticStyle:{background:"#3b4d60",padding:"10px",height:"calc(100% - 15px)",overflow:"auto",width:"60%",position:"relative"},attrs:{model:e.dialogInfo,"label-width":"80px"}},["see"===e.dialogType?o("div",{staticStyle:{width:"90%",height:"95%",position:"absolute","z-index":"10"}}):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"报告名称"}},[o("span",{staticStyle:{color:"red",position:"absolute",left:"-10px"}},[e._v("*")]),e._v(" "),o("el-input",{attrs:{size:"mini"},model:{value:e.dialogInfo.reportModel.reportModelName,callback:function(t){e.$set(e.dialogInfo.reportModel,"reportModelName",t)},expression:"dialogInfo.reportModel.reportModelName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"报告类型"}},[o("span",{staticStyle:{color:"red",position:"absolute",left:"-10px"}},[e._v("*")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"报告类型"},model:{value:e.dialogInfo.reportModel.reportModelType,callback:function(t){e.$set(e.dialogInfo.reportModel,"reportModelType",t)},expression:"dialogInfo.reportModel.reportModelType"}},e._l(e.reportModelTypeOpt,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"页眉"}},[o("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.dialogInfo.reportModel.reportModelHeader,callback:function(t){e.$set(e.dialogInfo.reportModel,"reportModelHeader",t)},expression:"dialogInfo.reportModel.reportModelHeader"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"页脚"}},[o("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.dialogInfo.reportModel.reportModelFooter,callback:function(t){e.$set(e.dialogInfo.reportModel,"reportModelFooter",t)},expression:"dialogInfo.reportModel.reportModelFooter"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"仪表板"}},[o("span",{staticStyle:{color:"red",position:"absolute",left:"-10px"}},[e._v("*")]),e._v(" "),o("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"仪表板ID",disabled:"disabled"},model:{value:e.dialogInfo.reportModel.dashboardID,callback:function(t){e.$set(e.dialogInfo.reportModel,"dashboardID",t)},expression:"dialogInfo.reportModel.dashboardID"}},e._l(e.dashboardIDOpt,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{staticClass:"explainWapper",attrs:{label:"说明"}},[o("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.dialogInfo.reportModel.reportModelExplain,callback:function(t){e.$set(e.dialogInfo.reportModel,"reportModelExplain",t)},expression:"dialogInfo.reportModel.reportModelExplain"}})],1),e._v(" "),"resive"===e.dialogType?o("p",{staticStyle:{"text-align":"center","margin-top":"10px"}},[o("el-button",{attrs:{type:"primary",disabled:""===e.dialogInfo.reportModel.reportModelName&&"disabled"},on:{click:e.sendBaseInfo}},[e._v("提交修改")])],1):e._e()],1)],1)]),e._v(" "),o("el-tab-pane",{staticStyle:{height:"95%"},attrs:{label:"模板信息",name:"second"}},[o("div",{staticClass:"detailWapper"},[o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.leftLoading,expression:"leftLoading"}],staticClass:"treeWapper",attrs:{"element-loading-background":"rgba(48, 62, 78, 0.5)"}},[o("div",{staticClass:"treeCon"},[o("el-tree",{attrs:{data:e.dialogInfo.reportModelInfo,props:e.defaultProps,"expand-on-click-node":!1,draggable:"see"!==e.dialogType},on:{"node-click":e.nodeClick,"node-drop":e.handleDrop},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return o("span",{staticClass:"custom-tree-node"},[o("span",{staticClass:"item-con"},[e._v(e._s(a.label))]),e._v(" "),"see"!==e.dialogType?o("span",{staticClass:"item-btn"},[o("i",{staticClass:"el-icon-plus",attrs:{title:"添加子节点"},on:{click:function(t){return t.stopPropagation(),e.appendNode(i)}}}),e._v(" "),o("i",{staticClass:"el-icon-close",attrs:{title:"删除"},on:{click:function(t){return t.stopPropagation(),e.deleteNode(i)}}})]):e._e()])}}])})],1),e._v(" "),"see"!==e.dialogType?o("p",{staticClass:"appendNode",on:{click:function(t){return e.appendNode(e.dialogInfo.reportModelInfo,!0)}}},[e._v("添加节点")]):e._e()]),e._v(" "),o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],staticClass:"formWapper",staticStyle:{position:"relative"},attrs:{"element-loading-background":"rgba(48, 62, 78, 0.5)"}},[o("div",{staticStyle:{position:"relative",padding:"0 10px","border-bottom":"1px solid #50667e","margin-bottom":"5px",height:"50px"}},[o("div",{staticClass:"ovd",staticStyle:{"font-size":"16px",color:"#2d8cf0","font-weight":"600","margin-right":"10px",width:"calc(100% - 100px)",position:"absolute",top:"10px"}},[e._v(e._s(e.nodeName))]),e._v(" "),"resive"===e.dialogType&&e.nodeForm.reportModelInfoID?o("el-button",{staticStyle:{position:"absolute",right:"0",top:"5px"},attrs:{type:"primary",disabled:!!e.btnDisabled&&"disabled"},on:{click:e.putResive}},[e._v("提交修改")]):e._e()],1),e._v(" "),o("el-form",{staticStyle:{height:"calc(100% - 52px)",overflow:"auto","overflow-x":"hidden",position:"relative"},attrs:{"label-width":"80px"}},["see"===e.dialogType?o("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","z-index":"10"}}):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"内容类型"}},[o("el-select",{attrs:{size:"mini",placeholder:"内容类型"},on:{change:e.contentTypeChange},model:{value:e.nodeForm.contentType,callback:function(t){e.$set(e.nodeForm,"contentType",t)},expression:"nodeForm.contentType"}},e._l(e.contentTypeOpt,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),"image"===e.nodeForm.contentType?o("el-form-item",{attrs:{label:"图表名称"}},[o("span",{staticStyle:{color:"red",position:"absolute",left:"-10px"}},[e._v("*")]),e._v(" "),o("el-input",{attrs:{size:"mini"},model:{value:e.nodeForm.imageName,callback:function(t){e.$set(e.nodeForm,"imageName",t)},expression:"nodeForm.imageName"}})],1):e._e(),e._v(" "),"table"===e.nodeForm.contentType?o("el-form-item",{attrs:{label:"表格名称"}},[o("span",{staticStyle:{color:"red",position:"absolute",left:"-10px"}},[e._v("*")]),e._v(" "),o("el-input",{attrs:{size:"mini"},model:{value:e.nodeForm.tableName,callback:function(t){e.$set(e.nodeForm,"tableName",t)},expression:"nodeForm.tableName"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"内容"}},["table"===e.nodeForm.contentType?o("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini"},model:{value:e.nodeForm.content,callback:function(t){e.$set(e.nodeForm,"content",t)},expression:"nodeForm.content"}},e._l(e.tableIdOpt,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1):"image"===e.nodeForm.contentType?o("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini"},model:{value:e.nodeForm.content,callback:function(t){e.$set(e.nodeForm,"content",t)},expression:"nodeForm.content"}},e._l(e.imgIdOpt,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1):"text"===e.nodeForm.contentType?o("div",[o("p",{staticStyle:{color:"#ff9e25","font-size":"10px"}},[e._v("文本类型的内容填写规则：文本+指标数据统计（下拉框 可选择‘空’）")]),e._v(" "),o("div",e._l(e.textContentArr,function(t,a){return o("div",{key:a,staticStyle:{display:"flex","align-items":"center"}},[o("el-input",{staticStyle:{width:"65%","margin-right":"10px"},attrs:{size:"mini"},on:{change:e.textConChange},model:{value:t.text,callback:function(o){e.$set(t,"text",o)},expression:"item.text"}}),e._v(" "),o("el-select",{staticStyle:{width:"30%"},attrs:{size:"mini"},on:{change:e.textConChange},model:{value:t.metricID,callback:function(o){e.$set(t,"metricID",o)},expression:"item.metricID"}},e._l(e.metricOpt,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("i",{staticClass:"el-icon-close",staticStyle:{cursor:"pointer","margin-left":"7px"},on:{click:function(t){return e.textContentArr.splice(a,1)}}})],1)}),0),e._v(" "),"see"!==e.dialogType?o("div",{staticClass:"addText",staticStyle:{height:"26px","line-height":"26px","margin-top":"5px"},on:{click:e.addText}},[e._v("添加")]):e._e()]):o("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.nodeForm.content,callback:function(t){e.$set(e.nodeForm,"content",t)},expression:"nodeForm.content"}})],1),e._v(" "),"text"===e.nodeForm.contentType?o("el-form-item",{attrs:{label:"是否加粗"}},[o("el-radio-group",{model:{value:e.nodeForm.bold,callback:function(t){e.$set(e.nodeForm,"bold",t)},expression:"nodeForm.bold"}},[o("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1):e._e(),e._v(" "),"text"===e.nodeForm.contentType?o("el-form-item",{attrs:{label:"位置"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"位置"},model:{value:e.nodeForm.alignment,callback:function(t){e.$set(e.nodeForm,"alignment",t)},expression:"nodeForm.alignment"}},e._l(e.alignmentOpt,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),"text"===e.nodeForm.contentType?o("el-form-item",{attrs:{label:"字号"}},[o("el-input-number",{attrs:{size:"mini",min:1},model:{value:e.nodeForm.fontSize,callback:function(t){e.$set(e.nodeForm,"fontSize",t)},expression:"nodeForm.fontSize"}})],1):e._e(),e._v(" "),"text"===e.nodeForm.contentType?o("el-form-item",{attrs:{label:"段前（磅）"}},[o("el-input-number",{attrs:{size:"mini",min:0},model:{value:e.nodeForm.spacingBefore,callback:function(t){e.$set(e.nodeForm,"spacingBefore",t)},expression:"nodeForm.spacingBefore"}})],1):e._e(),e._v(" "),o("el-form-item",{staticClass:"explainWapper",attrs:{label:"备注"}},[o("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:e.nodeForm.remark,callback:function(t){e.$set(e.nodeForm,"remark",t)},expression:"nodeForm.remark"}})],1)],1)],1)])])],1)],1)])],1)},staticRenderFns:[]};var c=o("VU/8")(s,d,!1,function(e){o("Vdss")},"data-v-0d784b6e",null);t.default=c.exports}});