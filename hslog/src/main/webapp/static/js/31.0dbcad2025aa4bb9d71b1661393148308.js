webpackJsonp([31],{"/JI/":function(t,e){},iLw9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ID1p"),o=n("8+FI"),a=n("/sA3"),s={name:"eventGroup",data:function(){return{loading:!1,busName:"eventGroupFrom",eventList:[],formConditionsArr:[],eventGroupList:[],conditionFrom:{event_group_name:"",event_id:""},page:1,c_page:1,size:15,allCounts:0}},created:function(){var t=this;this.getEventList(),this.formConditionsArr=[{label:"事件组名称",paramName:"event_group_name",model:{model:""},itemType:"",type:"input"},{label:"事件名称",paramName:"event_id",type:"select",itemType:"",model:{model:""},options:this.eventList}],this.getEventGroup(this.conditionFrom,1),o.default.$on(this.busName,function(e){t.conditionFrom=e,t.getEventGroup(t.conditionFrom,1),t.c_page=1})},beforeDestroy:function(){o.default.$off(this.busName)},methods:{goToAddEventGroup:function(){this.$router.push({path:"addEventGroup"})},goToEditEventGroup:function(t){Object(a.l)("editEventGroup"+t.event_group_id,"eventGroup/editEventGroup.vue",{name:t.event_group_name,id:t.event_group_id},"事件组修改")},refresh:function(){this.c_page=1,this.getEventGroup(this.conditionFrom,1)},getEventList:function(){var t=this;this.$nextTick(function(){t.loading=!0,t.$axios.post(t.$baseUrl+"/eventGroup/getEventListByType4Combobox.do",t.$qs.stringify()).then(function(e){t.loading=!1;var n=e.data;"true"===n.success?(t.eventList=n.data,t.formConditionsArr[t.formConditionsArr.length-1].options=t.eventList):layer.msg(n.message,{icon:5})}).catch(function(e){t.loading=!1})})},getEventGroup:function(t,e){var n=this;this.loading=!0;var i=t;i.pageIndex=e,i.pageSize=this.size,this.$nextTick(function(){n.loading=!0,n.$axios.post(n.$baseUrl+"/eventGroup/getEventGroupInfoByCondition.do",n.$qs.stringify(i)).then(function(t){n.loading=!1,n.loading=!1;var e=t.data;"true"===e.success?(n.allCounts=Number(e.data.count),n.eventGroupList=e.data.list):layer.msg(e.message,{icon:5})}).catch(function(t){n.loading=!1})})},removeEventGroup:function(t){var e=this;layer.confirm("您确定删除么？",{btn:["确定","取消"]},function(n){e.loading=!0,e.$nextTick(function(){e.$axios.post(e.$baseUrl+"/eventGroup/delete.do",e.$qs.stringify({event_group_id:t})).then(function(t){e.loading=!1,"true"==t.data.success?(layer.msg("删除成功",{icon:1}),e.c_page=1,e.getEventGroup(e.conditionFrom,1)):layer.msg(t.data.message,{icon:5})}).catch(function(t){e.loading=!1,layer.msg("删除失败",{icon:5})})})},function(){layer.close()})},handleCurrentChange:function(t){this.getEventGroup(this.conditionFrom,t)}},components:{vSearchForm:i.default}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-bg",attrs:{"element-loading-background":"rgba(48, 62, 78, 0.5)"}},[n("div",{staticClass:"top-title"},[t._v("事件组\n        "),n("div",{staticClass:"btn-wapper"},[n("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:t.goToAddEventGroup}},[t._v("添加")]),t._v(" "),n("el-button",{attrs:{type:"success",size:"mini",plain:""},on:{click:t.refresh}},[t._v("刷新")])],1)]),t._v(" "),n("div",{staticClass:"equipemnt-tools-form"},[n("v-search-form",{attrs:{formItem:t.formConditionsArr,busName:t.busName}})],1),t._v(" "),n("div",{staticClass:"group-wapper"},t._l(t.eventGroupList,function(e,i){return n("div",{key:i,staticClass:"event-item"},[n("div",{staticClass:"group-top"},[n("div",{staticClass:"group-name",attrs:{title:e.event_group_name}},[t._v(t._s(e.event_group_name))]),t._v(" "),n("div",{staticClass:"group-btn"},[n("i",{staticClass:"el-icon-edit",on:{click:function(n){return t.goToEditEventGroup(e)}}}),t._v(" "),n("i",{staticClass:"el-icon-close",on:{click:function(n){return t.removeEventGroup(e.event_group_id)}}})])]),t._v(" "),n("div",{staticClass:"eq-tit"},[n("span",[t._v("事件")]),n("span",{staticClass:"goToEqGroupSpan"},[t._v("("+t._s(e.event_group_events.length)+")")])]),t._v(" "),n("div",{staticClass:"eq-list"},t._l(e.event_group_events,function(e,i){return n("div",{key:i,staticClass:"eq-item"},[t._v(t._s(e.event_name_en))])}),0),t._v(" "),n("div",{staticClass:"group-desc",attrs:{title:e.event_group_note}},[t._m(0,!0),t._v(" "+t._s(e.event_group_note))]),t._v(" "),n("div",{staticClass:"circle-wapper"})])}),0),t._v(" "),n("div",{staticClass:"equipment-table-page"},[n("span",[t._v("共检索到事件组数量为 "),n("b",[t._v(t._s(t.allCounts))]),t._v(" 个")]),t._v(" "),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.c_page,"page-size":t.size,total:t.allCounts},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.c_page=e},"update:current-page":function(e){t.c_page=e}}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("b",[e("i",{staticClass:"el-icon-notebook-2"}),this._v(" :")])}]};var c=n("VU/8")(s,r,!1,function(t){n("/JI/")},"data-v-caa79c1a",null);e.default=c.exports}});