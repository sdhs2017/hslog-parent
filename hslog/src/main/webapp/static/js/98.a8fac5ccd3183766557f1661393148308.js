webpackJsonp([98],{"s+Se":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"controlCenter2",data:function(){return{loading:!1,beatState:"未开启",syslogState:"未开启",fileState:"未开启",beatsLeft:"-253px",syslogLeft:"0px",fileLeft:"0px",interval:""}},created:function(){var t=this;this.getBeatsState(),this.getSyslogState(),this.interval=setInterval(function(){t.getBeatsState(),t.getSyslogState(),t.getFileState()},5e3)},methods:{getBeatsState:function(){var t=this;this.$nextTick(function(){t.$axios.post(t.$baseUrl+"/collector/getAgentKafkaListenerState.do","").then(function(e){!0===e.data[0].state?(t.beatState="已开启",t.beatsLeft="-253px"):!1===e.data[0].state?(t.beatState="未开启",t.beatsLeft="0px"):console.log(data)}).catch(function(t){})})},getSyslogState:function(){var t=this;this.$nextTick(function(){t.$axios.post(t.$baseUrl+"/collector/getSyslogKafkaListenerState.do","").then(function(e){!0===e.data[0].state?(t.syslogState="已开启",t.syslogLeft="-253px"):!1===e.data[0].state?(t.syslogState="未开启",t.syslogLeft="0px"):console.log(e)}).catch(function(t){})})},getFileState:function(){var t=this;this.$nextTick(function(){t.$axios.post(t.$baseUrl+"/collector/getFileLogKafkaListenerState.do","").then(function(e){!0===e.data[0].state?(t.fileState="已开启",t.fileLeft="-253px"):!1===e.data[0].state?(t.fileState="未开启",t.fileLeft="0px"):console.log(e)}).catch(function(t){})})},playBeats:function(){var t=this;layer.confirm("是否开启Agent采集？",{btn:["确定","取消"]},function(e){layer.close(e),t.loading=!0,t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/collector/startAgentKafkaListener.do","").then(function(e){t.loading=!1,"true"===e.data.success?(layer.msg(e.data.message,{icon:1}),t.beatState="已开启",t.beatsLeft="-253px"):"false"===e.data.success&&layer.msg(e.data.message,{icon:5})}).catch(function(e){t.loading=!1,layer.msg("启动失败",{icon:5})})})},function(){layer.close()})},stopBeats:function(){var t=this;layer.confirm("是否关闭Agent采集服务？",{btn:["确定","取消"]},function(e){clearInterval(t.interval),layer.close(e),t.loading=!0,t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/collector/stopAgentKafkaListener.do","").then(function(e){t.loading=!1,"true"===e.data.success?(layer.msg(e.data.message,{icon:1}),t.beatState="未开启",t.beatsLeft="0px"):"false"===e.data.success&&layer.msg(e.data.message,{icon:5}),t.interval=setInterval(function(){t.getBeatsState(),t.getSyslogState(),t.getFileState()},5e3)}).catch(function(e){t.loading=!1,layer.msg("停止服务失败",{icon:5}),t.interval=setInterval(function(){t.getBeatsState(),t.getSyslogState(),t.getFileState()},5e3)})})},function(){layer.close()})},playSyslog:function(){var t=this;layer.confirm("是否开启syslog采集？",{btn:["确定","取消"]},function(e){layer.close(e),t.loading=!0,t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/collector/startSyslogKafkaListener.do  ","").then(function(e){t.loading=!1,"true"===e.data.success?(layer.msg(e.data.message,{icon:1}),t.syslogState="已开启",t.syslogLeft="-253px"):"false"===e.data.success&&layer.msg(e.data.message,{icon:5})}).catch(function(e){t.loading=!1,layer.msg("启动失败",{icon:5})})})},function(){layer.close()})},stopSyslog:function(){var t=this;layer.confirm("是否关闭syslog采集服务？",{btn:["确定","取消"]},function(e){clearInterval(t.interval),layer.close(e),t.loading=!0,t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/collector/stopSyslogKafkaListener.do","").then(function(e){t.loading=!1,"true"===e.data.success?(layer.msg(e.data.message,{icon:1}),t.syslogState="未开启",t.syslogLeft="0px"):"false"===e.data.success&&layer.msg(e.data.message,{icon:5}),t.interval=setInterval(function(){t.getBeatsState(),t.getSyslogState(),t.getFileState()},5e3)}).catch(function(e){t.loading=!1,layer.msg("停止服务失败",{icon:5}),t.interval=setInterval(function(){t.getBeatsState(),t.getSyslogState(),t.getFileState()},5e3)})})},function(){layer.close()})},playFile:function(){var t=this;layer.confirm("是否开启文件类采集？",{btn:["确定","取消"]},function(e){layer.close(e),t.loading=!0,t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/collector/startFileLogKafkaListener.do  ","").then(function(e){t.loading=!1,"true"===e.data.success?(layer.msg(e.data.message,{icon:1}),t.fileState="已开启",t.fileLeft="-253px"):"false"===e.data.success&&layer.msg(e.data.message,{icon:5})}).catch(function(e){t.loading=!1,layer.msg("启动失败",{icon:5})})})},function(){layer.close()})},stopFile:function(){var t=this;layer.confirm("是否关闭文件类采集服务？",{btn:["确定","取消"]},function(e){clearInterval(t.interval),layer.close(e),t.loading=!0,t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/collector/stopFileLogKafkaListener.do","").then(function(e){t.loading=!1,"true"===e.data.success?(layer.msg(e.data.message,{icon:1}),t.fileState="未开启",t.fileLeft="0px"):"false"===e.data.success&&layer.msg(e.data.message,{icon:5}),t.interval=setInterval(function(){t.getBeatsState(),t.getSyslogState(),t.getFileState()},5e3)}).catch(function(e){t.loading=!1,layer.msg("停止服务失败",{icon:5}),t.interval=setInterval(function(){t.getBeatsState(),t.getSyslogState(),t.getFileState()},5e3)})})},function(){layer.close()})},initialize:function(){var t=this;layer.confirm("是否初始化？",{btn:["确定","取消"]},function(e){layer.close(e),t.loading=!0,t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/log/createIndexAndMapping4Beats.do","").then(function(e){t.loading=!1,!0===e.data[0].state?layer.msg(e.data[0].msg,{icon:1}):!1===e.data[0].state&&layer.msg(e.data[0].msg,{icon:5})}).catch(function(e){t.loading=!1,layer.msg("初始化失败",{icon:5})})})},function(){layer.close()})},backup:function(){var t=this;layer.confirm("是否备份日志数据？",{btn:["确定","取消"]},function(e){layer.close(e),t.loading=!0,t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/manage/createSnapshotByIndices.do","").then(function(e){t.loading=!1,!0===e.data[0].state?layer.msg(e.data[0].msg,{icon:1}):!1===e.data[0].state&&layer.msg(e.data[0].msg,{icon:5})}).catch(function(e){t.loading=!1,layer.msg("备份失败",{icon:5})})})},function(){layer.close()})},recover:function(){var t=this;layer.confirm("是否恢复日志数据？",{btn:["确定","取消"]},function(e){layer.close(e),t.loading=!0,t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/manage/restore.do","").then(function(e){t.loading=!1,!0===e.data[0].state?layer.msg(e.data[0].msg,{icon:1}):!1===e.data[0].state&&layer.msg(e.data[0].msg,{icon:5})}).catch(function(e){t.loading=!1,layer.msg("恢复失败",{icon:5})})})},function(){layer.close()})}},beforeDestroy:function(){clearInterval(this.interval)}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-bg",attrs:{"element-loading-background":"rgba(48, 62, 78, 0.5)"}},[s("div",{staticClass:"top-title"},[t._v("控制中心")]),t._v(" "),s("div",{staticClass:"control-wapper"},[s("div",{staticClass:"serviceConBox"},[s("div",{staticClass:"beats-status",staticStyle:{"border-right":"1px dashed #40566d"}},[s("span",[t._v("Agent采集:")]),t._v(" "),s("span",{staticClass:"serviceStatus",style:"未开启"===t.beatState?{color:"#d9534f"}:{color:"#1ab394"}},[t._v(t._s(t.beatState))])]),t._v(" "),s("div",{staticClass:"syslog-status",staticStyle:{"border-right":"1px dashed #40566d"}},[s("span",[t._v("Syslog采集:")]),t._v(" "),s("span",{staticClass:"serviceStatus",style:"未开启"===t.syslogState?{color:"#d9534f"}:{color:"#1ab394"}},[t._v(t._s(t.syslogState))])]),t._v(" "),s("div",{staticClass:"file-status"},[s("span",[t._v("文件类采集:")]),t._v(" "),s("span",{staticClass:"serviceStatus",style:"未开启"===t.fileState?{color:"#d9534f"}:{color:"#1ab394"}},[t._v(t._s(t.fileState))])])]),t._v(" "),s("div",{staticClass:"btnConBox"},[s("div",{staticClass:"btnConBoxTop"},[s("div",{staticClass:"left-wapper serviceBtn"},[s("div",{staticClass:"scroll-wapper",style:{left:t.beatsLeft}},[s("div",{staticClass:"play-beats",on:{click:t.playBeats}},[t._m(0),t._v(" "),t._m(1)]),t._v(" "),s("div",{staticClass:"stop-beats",on:{click:t.stopBeats}},[t._m(2),t._v(" "),t._m(3)])])]),t._v(" "),s("div",{staticClass:"right-wapper serviceBtn"},[s("div",{staticClass:"scroll-wapper",style:{left:t.syslogLeft}},[s("div",{staticClass:"play-syslog",on:{click:t.playSyslog}},[t._m(4),t._v(" "),t._m(5)]),t._v(" "),s("div",{staticClass:"stop-syslog",on:{click:t.stopSyslog}},[t._m(6),t._v(" "),t._m(7)])])]),t._v(" "),s("div",{staticClass:"right-wapper serviceBtn"},[s("div",{staticClass:"scroll-wapper",style:{left:t.fileLeft}},[s("div",{staticClass:"play-syslog",on:{click:t.playFile}},[t._m(8),t._v(" "),t._m(9)]),t._v(" "),s("div",{staticClass:"stop-syslog",on:{click:t.stopFile}},[t._m(10),t._v(" "),t._m(11)])])])]),t._v(" "),s("div",{staticClass:"btnConBoxBottom"},[s("div",{staticClass:"serviceBtn",attrs:{id:"initialize",title:"点击初始化"},on:{click:t.initialize}},[s("i",{staticClass:"el-icon-refresh-right"}),t._v(" "),s("p",{staticClass:"btnTitle"},[t._v("初始化")]),t._v(" "),s("p",{staticClass:"btnDescribe"},[t._v("对集群的数据结构进行初始化，保证日志数据正常采集到数据中心")])]),t._v(" "),s("div",{staticClass:"serviceBtn",attrs:{id:"backup",title:"点击备份数据"},on:{click:t.backup}},[s("i",{staticClass:"el-icon-printer"}),t._v(" "),s("p",{staticClass:"btnTitle"},[t._v("备份")]),t._v(" "),s("p",{staticClass:"btnDescribe"},[t._v("对集群中的日志数据进行完整的备份操作")])]),t._v(" "),s("div",{staticClass:"serviceBtn",attrs:{id:"recover",title:"点击恢复备份"},on:{click:t.recover}},[s("i",{staticClass:"el-icon-refresh"}),t._v(" "),s("p",{staticClass:"btnTitle"},[t._v("恢复备份")]),t._v(" "),s("p",{staticClass:"btnDescribe"},[t._v("对删除后的数据进行恢复操作（需对删除的数据先进行备份操作）")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"play-i"},[e("i",{staticClass:"el-icon-caret-right"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"play-t "},[e("div",[e("p",{staticClass:"btnTitle"},[this._v("开启Agent采集")]),this._v(" "),e("p",{staticClass:"btnDescribe"},[this._v("开始收集各个Agent发送过来的数据，范式化后入库")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"play-i"},[e("i",{staticClass:"el-icon-circle-close"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"play-t "},[e("div",[e("p",{staticClass:"btnTitle"},[this._v("关闭Agent采集")]),this._v(" "),e("p",{staticClass:"btnDescribe"},[this._v("停止收集各个Agent发送过来的数据")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"play-i"},[e("i",{staticClass:"el-icon-caret-right"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"play-t "},[e("div",[e("p",{staticClass:"btnTitle"},[this._v("开启Syslog采集")]),this._v(" "),e("p",{staticClass:"btnDescribe"},[this._v("开始收集各个资产发送过来的日志数据，范式化后入库")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"play-i"},[e("i",{staticClass:"el-icon-circle-close"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"play-t "},[e("div",[e("p",{staticClass:"btnTitle"},[this._v("关闭Syslog采集")]),this._v(" "),e("p",{staticClass:"btnDescribe"},[this._v("停止收集各个资产发送过来的数据")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"play-i"},[e("i",{staticClass:"el-icon-caret-right"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"play-t "},[e("div",[e("p",{staticClass:"btnTitle"},[this._v("开启文件类采集")]),this._v(" "),e("p",{staticClass:"btnDescribe"},[this._v("开始收集各个资产发送过来的日志数据，范式化后入库")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"play-i"},[e("i",{staticClass:"el-icon-circle-close"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"play-t "},[e("div",[e("p",{staticClass:"btnTitle"},[this._v("关闭文件类采集")]),this._v(" "),e("p",{staticClass:"btnDescribe"},[this._v("停止收集各个资产发送过来的数据")])])])}]};var n=s("VU/8")(a,i,!1,function(t){s("tE3w")},"data-v-20a2a28c",null);e.default=n.exports},tE3w:function(t,e){}});