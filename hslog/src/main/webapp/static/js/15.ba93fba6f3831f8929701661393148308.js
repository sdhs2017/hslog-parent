webpackJsonp([15],{JkX2:function(e,t){},YOvk:function(e,t){},cChe:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("woOf"),s=l.n(a),r=l("mvHQ"),o=l.n(r),i=l("8+FI"),n={name:"logicAssetsForm",props:{formData:{type:Object},busName:{type:String},routerUrl:{type:String}},data:function(){return{form:{name:"",ip:"",hostName:"",logType:"",log_level:["emergency","alert","critical","error","warning","notice","information","debug"],type:"",startUp:1,macAdress:"",system:"",domain:"",port:"",systemVersion:"",assetNum:"",serialNum:"",describe:"",valuation:"",userName:"",createTime:"",updateTime:"",endTime:""},defaultForm:"",logTypeArr:[],typeArr:[{label:"实体机",value:"01"},{label:"虚拟机",value:"02"},{label:"微服务(类Docker)",value:"03"}],equipmentData:{}}},created:function(){this.getLogType(),this.defaultForm=o()(this.form)},mounted:function(){},watch:{formData:function(e,t){for(var l in this.equipmentData=e,this.equipmentData.log_level&&(this.equipmentData.log_level=this.equipmentData.log_level.split(",").filter(function(e){return e&&e.trim()})),this.form)this.form[l]=this.equipmentData[l]}},methods:{getLogType:function(){var e=this;this.$nextTick(function(){e.$axios.get("static/filejson/logTypeLevel.json",{}).then(function(t){for(var l=0;l<t.data.length;l++){var a={value:t.data[l].type,label:t.data[l].type};e.logTypeArr.push(a)}}).catch(function(e){console.log(e)})})},saveEquipment:function(){if(""===this.form.name)layer.msg("资产名称不能为空",{icon:5});else if(""===this.form.hostName)layer.msg("主机名称不能为空",{icon:5});else if(""===this.form.ip)layer.msg("IP地址不能为空",{icon:5});else if(0==this.form.log_level.length)layer.msg("日志级别不能为空",{icon:5});else if(0==this.form.logType.length)layer.msg("日志类型不能为空",{icon:5});else if(""==this.form.type)layer.msg("资产类型不能为空",{icon:5});else{for(var e=s()({},this.form),t=e.log_level.length,l="",a=0;a<t;a++)l+=e.log_level[a]+",";e.log_level=l,i.default.$emit(this.busName,e)}},emptyData:function(){this.form=JSON.parse(this.defaultForm)}}},c={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-form",{ref:"form",staticClass:"equipment-form",attrs:{"label-width":"100px"}},[l("el-row",[l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple"},[l("span",{staticClass:"mustWrite"},[e._v("*")]),e._v(" "),l("el-form-item",{attrs:{label:"资产名称:"}},[l("el-input",{attrs:{placeholder:"资产名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)]),e._v(" "),l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple-light"},[l("span",{staticClass:"mustWrite"},[e._v("*")]),e._v(" "),l("el-form-item",{attrs:{label:"资产ip:"}},[l("el-input",{attrs:{placeholder:"资产ip"},model:{value:e.form.ip,callback:function(t){e.$set(e.form,"ip",t)},expression:"form.ip"}})],1)],1)])],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple"},[l("span",{staticClass:"mustWrite"},[e._v("*")]),e._v(" "),l("el-form-item",{attrs:{label:"主机名:"}},[l("el-input",{attrs:{placeholder:"主机名"},model:{value:e.form.hostName,callback:function(t){e.$set(e.form,"hostName",t)},expression:"form.hostName"}})],1)],1)]),e._v(" "),l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple-light"},[l("span",{staticClass:"mustWrite"},[e._v("*")]),e._v(" "),l("el-form-item",{attrs:{label:"日志类型:"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.logType,callback:function(t){e.$set(e.form,"logType",t)},expression:"form.logType"}},e._l(e.logTypeArr,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)])],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple"},[l("span",{staticClass:"mustWrite"},[e._v("*")]),e._v(" "),l("el-form-item",{attrs:{label:"日志级别:"}},[l("el-checkbox-group",{model:{value:e.form.log_level,callback:function(t){e.$set(e.form,"log_level",t)},expression:"form.log_level"}},[l("el-checkbox",{attrs:{label:"emergency"}}),e._v(" "),l("el-checkbox",{attrs:{label:"alert"}}),e._v(" "),l("el-checkbox",{attrs:{label:"critical"}}),e._v(" "),l("el-checkbox",{attrs:{label:"error"}}),e._v(" "),l("el-checkbox",{attrs:{label:"warning"}}),e._v(" "),l("el-checkbox",{attrs:{label:"notice"}}),e._v(" "),l("el-checkbox",{attrs:{label:"information"}}),e._v(" "),l("el-checkbox",{attrs:{label:"debug"}})],1)],1)],1)]),e._v(" "),l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple-light"},[l("span",{staticClass:"mustWrite"},[e._v("*")]),e._v(" "),l("el-form-item",{attrs:{label:"资产类型:"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeArr,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)])],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple"},[l("el-form-item",{attrs:{label:"根域名:"}},[l("el-input",{attrs:{placeholder:"根域名"},model:{value:e.form.domain,callback:function(t){e.$set(e.form,"domain",t)},expression:"form.domain"}})],1)],1)]),e._v(" "),l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple-light"},[l("el-form-item",{attrs:{label:"端口:"}},[l("el-input",{attrs:{placeholder:"端口"},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",t)},expression:"form.port"}})],1)],1)])],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple"},[l("el-form-item",{attrs:{label:"系统:"}},[l("el-input",{attrs:{placeholder:"系统"},model:{value:e.form.system,callback:function(t){e.$set(e.form,"system",t)},expression:"form.system"}})],1)],1)]),e._v(" "),l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple-light"},[l("el-form-item",{attrs:{label:"系统版本号:"}},[l("el-input",{attrs:{placeholder:"系统版本号"},model:{value:e.form.systemVersion,callback:function(t){e.$set(e.form,"systemVersion",t)},expression:"form.systemVersion"}})],1)],1)])],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple"},[l("el-form-item",{attrs:{label:"资产编号:"}},[l("el-input",{attrs:{placeholder:"资产编号"},model:{value:e.form.assetNum,callback:function(t){e.$set(e.form,"assetNum",t)},expression:"form.assetNum"}})],1)],1)]),e._v(" "),l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple-light"},[l("el-form-item",{attrs:{label:"序列号:"}},[l("el-input",{attrs:{placeholder:"序列号"},model:{value:e.form.serialNum,callback:function(t){e.$set(e.form,"serialNum",t)},expression:"form.serialNum"}})],1)],1)])],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple"},[l("span",{staticClass:"mustWrite"},[e._v("*")]),e._v(" "),l("el-form-item",{attrs:{label:"是否启用:"}},[l("el-radio-group",{model:{value:e.form.startUp,callback:function(t){e.$set(e.form,"startUp",t)},expression:"form.startUp"}},[l("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),l("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1)],1)]),e._v(" "),l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple-light"},[l("el-form-item",{attrs:{label:"MAC地址:"}},[l("el-input",{attrs:{placeholder:"MAC地址"},model:{value:e.form.macAdress,callback:function(t){e.$set(e.form,"macAdress",t)},expression:"form.macAdress"}})],1)],1)])],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple"},[l("el-form-item",{attrs:{label:"创建时间:"}},[l("el-input",{attrs:{disabled:""},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime",t)},expression:"form.createTime"}})],1)],1)]),e._v(" "),l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple-light"},[l("el-form-item",{attrs:{label:"更新时间:"}},[l("el-input",{attrs:{disabled:""},model:{value:e.form.updateTime,callback:function(t){e.$set(e.form,"updateTime",t)},expression:"form.updateTime"}})],1)],1)])],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple"},[l("el-form-item",{attrs:{label:"截止时间:"}},[l("el-input",{attrs:{disabled:""},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1)],1)]),e._v(" "),l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple-light"},[l("el-form-item",{attrs:{label:"描述:"}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:3}},model:{value:e.form.describe,callback:function(t){e.$set(e.form,"describe",t)},expression:"form.describe"}})],1)],1)])],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple"},[l("el-form-item",{attrs:{label:"责任人:"}},[l("el-input",{attrs:{disabled:""},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1)],1)]),e._v(" "),l("el-col",{attrs:{span:12}},[l("div",{staticClass:"grid-content bg-purple-light"},[l("el-form-item",{attrs:{label:"资产价值:"}},[l("el-input",{attrs:{placeholder:"资产价值"},model:{value:e.form.valuation,callback:function(t){e.$set(e.form,"valuation",t)},expression:"form.valuation"}})],1)],1)])],1)],1),e._v(" "),l("div",{staticClass:"equipment-form-btns"},[l("el-button",{attrs:{type:"primary"},on:{click:e.saveEquipment}},[e._v("保存")]),e._v(" "),l("el-button",{attrs:{type:"info"},on:{click:e.emptyData}},[e._v("清空")])],1)],1)},staticRenderFns:[]};var m=l("VU/8")(n,c,!1,function(e){l("YOvk")},"data-v-451f5c6a",null);t.default=m.exports},rWvW:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("8+FI"),s={name:"addLogicAssets",data:function(){return{loading:!1,routerUrl:"/equipment",busName:"addLogicAssets",formData:{}}},created:function(){var e=this;a.default.$on("addLogicAssets",function(t){e.formData=t,e.addEquipment(e.formData)})},methods:{addEquipment:function(e){var t=this;this.loading=!0,this.$nextTick(function(){t.$axios.post(t.$baseUrl+"/asset/insert.do",t.$qs.stringify(e)).then(function(e){t.loading=!1,"true"==e.data.success?(layer.msg("添加成功",{icon:1}),t.$router.push({path:"/logicAssetsList"})):layer.msg("添加失败",{icon:5})}).catch(function(e){console.log(e),t.loading=!1})})}},beforeDestroy:function(){a.default.$off("addLogicAssets")},components:{vEquipmentForm:l("cChe").default}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content-bg"},[t("div",{staticClass:"top-title"},[this._v("添加逻辑资产")]),this._v(" "),t("div",{staticClass:"equipment-path"}),this._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:this.loading,expression:"loading"}],staticClass:"form-wapper",attrs:{"element-loading-background":"rgba(48, 62, 78, 0.5)"}},[t("v-equipment-form",{attrs:{busName:this.busName,routerUrl:this.routerUrl}})],1)])},staticRenderFns:[]};var o=l("VU/8")(s,r,!1,function(e){l("JkX2")},"data-v-05f187ac",null);t.default=o.exports}});