webpackJsonp([19],{"124F":function(e,t){},mfbw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),n=a.n(l),i=a("ID1p"),o=a("qTy0"),s=a("8+FI"),r={name:"eventSearch",data:function(){return{page:1,size:15,c_page:1,allCounts:0,total:0,formConditionsArr:[{label:"时间范围",type:"datetimerange",itemType:"",paramName:"time",model:{model:[]},val:""},{label:"事件级别",paramName:"event_level",type:"select",itemType:"",model:{model:""},options:[{value:"",label:"全部"},{value:"0",label:"Emergency"},{value:"1",label:"Alert"},{value:"2",label:"Critical"},{value:"3",label:"Error"},{value:"4",label:"Warn"},{value:"5",label:"Notice"},{value:"6",label:"Info"},{value:"7",label:"Debug"}]},{label:"事件类型",paramName:"event_type",itemType:"",model:{model:""},type:"input"},{label:"IP地址",paramName:"ip",itemType:"",model:{model:""},type:"input"},{label:"资产名称",paramName:"hostname",itemType:"",model:{model:""},type:"input"}],tableHead:[{prop:"logtime",label:"时间",width:"150"},{prop:"event_des",label:"事件名称",width:"150"},{prop:"operation_level",label:"事件级别",width:"100"},{prop:"event_type",label:"事件类型",width:"120"},{prop:"ip",label:"IP地址",width:"125"},{prop:"type",label:"日志类型",width:"100"},{prop:"equipmentname",label:"资产名称",width:"120"},{prop:"operation_des",label:"日志内容",width:""}],tableData:[],selectVal:"10万",selectOption:[{value:1e5,label:"10万"},{value:2e5,label:"20万"},{value:5e5,label:"50万"},{value:1e6,label:"100万"},{value:1e7,label:"1000万"},{value:1e8,label:"1亿"}],eventSearchCondition:{starttime:"",endtime:"",ip:"",hostname:"",event_type:"",event_level:""},saveCondition:{}}},created:function(){var e=this;this.saveCondition=this.eventSearchCondition,this.getEventsData(1,this.eventSearchCondition),s.default.$on("eventSearch",function(t){e.getEventsData(1,t),e.c_page=1,e.saveCondition=t})},methods:{getEventsData:function(e,t){var a=this,l=layer.load(1);t.size=this.size,t.page=e,this.$nextTick(function(){a.$axios.post(a.$baseUrl+"/log/getEventListByBlend.do",a.$qs.stringify({hsData:n()(t)})).then(function(e){layer.close(l),a.tableData=e.data[0].list,a.allCounts=e.data[0].count,a.allCounts>1e5?a.total=1e5:a.total=a.allCounts}).catch(function(e){layer.close(l)})})},handleCurrentChange:function(e){this.getEventsData(e,this.saveCondition),e*this.size>this.allCounts?layer.tips("这是最后一页",".el-pager .active",{tips:[1,"#3595CC"],time:4e3}):$(".el-pager .active").next().length<1&&layer.tips("可通过更改最大显示数量，查看后面的数据",".maxSelect",{tips:[1,"#3595CC"],time:4e3})},seletChange:function(e){e<this.allCounts?this.total=e:this.total=this.allCounts;e>=1e7&&layer.tips("提示: 数据量过大时，细化查询条件，提高查询效率",".maxSelect",{tips:[1,"#3595CC"],time:4e3})}},components:{vSearchForm:i.default,vBasetable:o.default}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-bg"},[a("div",{staticClass:"top-title"},[e._v("事件搜索")]),e._v(" "),a("div",{staticClass:"event-search-condition"},[a("v-search-form",{attrs:{formItem:e.formConditionsArr,busName:"eventSearch"}})],1),e._v(" "),a("div",{staticClass:"event-search-content"},[a("v-basetable",{attrs:{tableHead:e.tableHead,tableData:e.tableData}}),e._v(" "),a("div",{staticClass:"event-table-page"},[e._v("\n            共检索到事件数为 "),a("b",[e._v(e._s(e.allCounts))]),e._v("，最大展示\n            "),a("el-select",{staticClass:"maxSelect",staticStyle:{width:"84px"},attrs:{placeholder:"请选择",size:"mini"},on:{change:e.seletChange},model:{value:e.selectVal,callback:function(t){e.selectVal=t},expression:"selectVal"}},e._l(e.selectOption,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" 条\n            "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.c_page,"page-size":e.size,total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.c_page=t},"update:current-page":function(t){e.c_page=t}}})],1)],1)])},staticRenderFns:[]};var c=a("VU/8")(r,p,!1,function(e){a("124F")},"data-v-ff9a13be",null);t.default=c.exports}});