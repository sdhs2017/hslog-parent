webpackJsonp([15],{"3MoX":function(e,t){},OfEp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("OLNH"),i=a("jKHB"),l=a("8+FI"),r=a("/sA3"),n={name:"realTimeFlow",data:function(){return{interTime:"",refreshObj:{defaultVal:"5",opt:[{label:"5s",value:"5"},{label:"10s",value:"10"},{label:"20s",value:"20"}]},refreshIntTime:"5000",dataTime:1,bandwidth:10,bandwidthArr:[{label:"10M",value:10},{label:"100M",value:100},{label:"1000M",value:1e3}],allUsedData:{baseConfig:{title:"",xAxisName:"时间",yAxisName:"百分比/%",hoverText:""},yAxisArr:[{name:"",color:"rgb(15,219,243)",data:[]}]},allUsedData2:{baseConfig:{title:"",xAxisName:"",yAxisName:"",hoverText:"全局"},yAxisArr:[{name:"利用率",data:[]}]},allPacketsData:{baseConfig:{title:"",xAxisName:"时间",yAxisName:"个数/个",hoverText:""},yAxisArr:[{name:"",color:"rgb(15,219,243)",data:[]}]}}},created:function(){var e=this;l.default.$on("realTimeFlowRefreshBus",function(t){e.refreshIntTime=1e3*t,clearInterval(e.interTime),e.setInterFun()}),l.default.$on("realTimeFlowDataBus",function(t){e.dataTime=t})},mounted:function(){var e=Object(r.a)("yyyy-mm-dd HH:MM:SS",new Date),t=new Date(new Date(e).valueOf()-60*this.dataTime*60*1e3);Object(r.a)("yyyy-mm-dd HH:MM:SS",t);this.getAllUsedData(this.refreshIntTime/1e3),this.getAllPacketsData(this.refreshIntTime/1e3)},methods:{getAllUsedData:function(e){var t=this;this.$nextTick(function(){t.$post("/flow/getPacketLengthPerSecond.do",{timeInterval:e}).then(function(e){e[0].value[1]=8*e[0].value[1]*1e3*100/t.refreshIntTime/t.bandwidth/1024,e[0].value[1]=e[0].value[1].toFixed(2),t.allUsedData.yAxisArr[0].data.length<60?t.allUsedData.yAxisArr[0].data.push(e[0]):(t.allUsedData.yAxisArr[0].data.shift(),t.allUsedData.yAxisArr[0].data.push(e[0])),t.allUsedData2.yAxisArr[0].data=[{value:e[0].value[1],name:"利用率"}]}).catch(function(e){})})},getAllPacketsData:function(e){var t=this;this.$nextTick(function(){t.$post("/flow/getPacketCount.do",{timeInterval:e}).then(function(e){t.allPacketsData.yAxisArr[0].data.length<60?t.allPacketsData.yAxisArr[0].data.push(e[0]):(t.allPacketsData.yAxisArr[0].data.shift(),t.allPacketsData.yAxisArr[0].data.push(e[0]))}).catch(function(e){})})},setInterFun:function(){var e=this;this.interTime=setInterval(function(){var t=Object(r.a)("yyyy-mm-dd HH:MM:SS",new Date),a=new Date(new Date(t).valueOf()-60*e.dataTime*60*1e3);Object(r.a)("yyyy-mm-dd HH:MM:SS",a);e.getAllUsedData(e.refreshIntTime/1e3),e.getAllPacketsData(e.refreshIntTime/1e3)},this.refreshIntTime)}},beforeRouteEnter:function(e,t,a){a(function(e){e.setInterFun()})},beforeRouteLeave:function(e,t,a){clearInterval(this.interTime),a()},components:{vFlowchartfrom:s.default,vEcharts:i.default}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-bg"},[a("div",{staticClass:"top-title"},[e._v("全局实时流量\n    "),a("v-flowchartfrom",{staticClass:"from-wapper",attrs:{refreshBus:"realTimeFlowRefreshBus",refreshObj:e.refreshObj}})],1),e._v(" "),a("div",{staticClass:"item-wapper"},[a("div",{staticClass:"item-title"},[e._v("全局-利用率百分比")]),e._v(" "),a("div",{staticClass:"chart-from"},[a("span",[e._v("带宽：")]),e._v(" "),a("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.bandwidth,callback:function(t){e.bandwidth=t},expression:"bandwidth"}},e._l(e.bandwidthArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"item-content"},[a("v-echarts",{attrs:{echartType:"timeline",echartData:this.allUsedData}})],1),e._v(" "),a("div",{staticClass:"item-content"},[a("v-echarts",{attrs:{echartType:"gauge",echartData:this.allUsedData2}})],1)]),e._v(" "),a("div",{staticClass:"item-wapper"},[a("div",{staticClass:"item-title"},[e._v("全局数据包个数")]),e._v(" "),a("div",{staticClass:"item-content"},[a("v-echarts",{attrs:{echartType:"timeline",echartData:this.allPacketsData}})],1)])])},staticRenderFns:[]};var d=a("VU/8")(n,c,!1,function(e){a("3MoX")},"data-v-538b7a5f",null);t.default=d.exports}});
//# sourceMappingURL=15.fedb472602d3ffdd3763.js.map