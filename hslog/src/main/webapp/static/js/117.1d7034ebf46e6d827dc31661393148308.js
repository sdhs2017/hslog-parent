webpackJsonp([117],{H8Ij:function(e,t){},ryjK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"equipmentList",data:function(){return{currentIndex:"",fullscreenLoading:!1,options:[{value:"name",label:"资产名称"},{value:"hostName",label:"主机名"},{value:"ip",label:"IP地址"},{value:"logType",label:"日志类型"}],searchType:"name",searchVal:"",searchObj:{name:"",hostName:"",ip:"",logType:"",pageIndex:1,pageSize:15},allCount:0,equipmentList:[],equipmentType:[]}},created:function(){this.getEquipmentType(),this.getEuquipmentData(1)},methods:{getEquipmentType:function(){var e=this;this.$nextTick(function(){e.$axios.get("static/filejson/equiptype.json",{}).then(function(t){e.equipmentType=t.data}).catch(function(e){console.log(e)})})},getEuquipmentData:function(e){var t=this;this.fullscreenLoading=!0,this.searchObj.pageIndex=e,this.$axios.post(this.$baseUrl+"/equipment/selectPage.do",this.$qs.stringify(this.searchObj)).then(function(e){t.fullscreenLoading=!1,t.allCount=e.data[0].count.count;var a=e.data[0].equipment;for(var n in a){var i="",s=a[n].type.substring(0,2);for(var l in t.equipmentType){var o=t.equipmentType[l];if(o.value==s){for(var r in i+=o.label+"-",o.children)if(o.children[r].value==a[n].type){i+=o.children[r].label;break}break}}a[n].type=i,t.equipmentList.push(a[n])}}).catch(function(e){t.fullscreenLoading=!1,t.$Message.err("获取数据失败")})},searchData:function(){this.searchObj={name:"",hostName:"",ip:"",logType:"",pageIndex:1,pageSize:15},this.searchObj[this.searchType]=this.searchVal,this.equipmentList=[],this.getEuquipmentData(1)},nextPage:function(){this.getEuquipmentData(this.searchObj.pageIndex+1)},goToChart:function(e){if("winlog"===e.logType){var t=("winEquipmentCharts"+e.id).replace(/\//g,"&-"),n=[{path:"/mobile",component:function(e){return a.e(1).then(function(){var t=[a("e1Tp")];e.apply(null,t)}.bind(this)).catch(a.oe)},children:[{path:"/mobile/"+t,name:"equipmentCharts"+e.id,component:function(e){return a.e(125).then(function(){var t=[a("/pjv")];e.apply(null,t)}.bind(this)).catch(a.oe)},meta:{title:"统计"}}]}];this.$router.addRoutes(n),this.$router.push({path:"/mobile/"+t,query:{name:e.name,id:e.id,logType:e.logType}})}else{var i=("equipmentCharts"+e.id).replace(/\//g,"&-"),s=[{path:"/mobile",component:function(e){return a.e(1).then(function(){var t=[a("e1Tp")];e.apply(null,t)}.bind(this)).catch(a.oe)},children:[{path:"/mobile/"+i,name:"equipmentCharts"+e.id,component:function(e){return a.e(126).then(function(){var t=[a("AcA9")];e.apply(null,t)}.bind(this)).catch(a.oe)},meta:{title:"统计"}}]}];this.$router.addRoutes(s),this.$router.push({path:"/mobile/"+i,query:{name:e.name,id:e.id,logType:e.logType}})}},goToDashboard:function(e){var t=("equipmentDashboard"+e.id).replace(/\//g,"&-"),n=[{path:"/mobile",component:function(e){return a.e(1).then(function(){var t=[a("e1Tp")];e.apply(null,t)}.bind(this)).catch(a.oe)},children:[{path:"/mobile/"+t,name:"equipmentDashboard"+e.id,component:function(e){return a.e(123).then(function(){var t=[a("da+f")];e.apply(null,t)}.bind(this)).catch(a.oe)},meta:{title:"统计"}}]}];this.$router.addRoutes(n),this.$router.push({path:"/mobile/"+t,query:{name:e.name+"指标数据统计",eid:e.id,id:"y_qMB3IBmkPMjFRE7O-_",type:"EQedit"}})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-bg"},[a("div",{staticClass:"search-wapper"},[a("el-select",{staticClass:"searchType",attrs:{placeholder:"请选择"},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{attrs:{type:"text"},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}}),e._v(" "),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.searchData}},[a("i",{staticClass:"el-icon-search"})])],1),e._v(" "),a("p",{staticClass:"tip-wapper"},[e._v("(点击下列资产可查看报表)")]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"equipment-wapper",attrs:{"element-loading-text":"获取中","element-loading-background":"rgba(0, 0, 0, 0.6)"}},[a("div",{staticClass:"wapper-con"},[a("ul",{staticClass:"con-ul"},e._l(e.equipmentList,function(t,n){return a("li",{staticClass:"con-item",on:{click:function(t){e.currentIndex=n}}},[e.currentIndex===n?a("div",{staticClass:"li-btn"},[a("i",{staticClass:"el-icon-error",staticStyle:{position:"absolute",left:"5px",top:"5px","font-size":"15px"},on:{click:function(t){t.stopPropagation(),e.currentIndex=""}}}),e._v(" "),a("div",["metric"===t.logType?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.goToDashboard(t)}}},[e._v("仪表盘")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.goToChart(t)}}},[e._v("图表")])],1)]):e._e(),e._v(" "),a("span",{staticClass:"logCount"},[e._v(e._s(t.log_count))]),e._v(" "),a("div",{staticClass:"item-inf"},[a("p",[e._v(e._s(t.logType))]),e._v(" "),a("p",[e._v(e._s(t.type))]),e._v(" "),a("p",[e._v(e._s(t.ip))])]),e._v(" "),a("div",{staticClass:"item-name"},[e._v(e._s(t.name))])])}),0),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:e.allCount>e.searchObj.pageIndex*e.searchObj.pageSize,expression:"allCount> (searchObj.pageIndex * searchObj.pageSize)"}],staticClass:"next-page",on:{click:e.nextPage}},[a("i",{staticClass:"el-icon-d-arrow-right"})])])])])},staticRenderFns:[]};var s=a("VU/8")(n,i,!1,function(e){a("H8Ij")},"data-v-03e33a19",null);t.default=s.exports}});