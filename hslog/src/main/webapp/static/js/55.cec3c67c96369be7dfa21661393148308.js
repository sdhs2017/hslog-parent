webpackJsonp([55],{"U/SR":function(t,e){},cp54:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("woOf"),n=i.n(o),s=i("AIWI"),a=i("/sA3"),r=(i("8+FI"),{name:"flowLogs",data:function(){var t=this;return{layerObj:{detailData:{},layerState:!1},htmlTitle:"流量",busName:"dnsLogs",searchUrl:"flow/getFlowListByBlend.do",timeArr:[],options:[{value:"",label:""},{value:"libpcap",label:"libpcap"},{value:"netflow",label:"netflow"}],formConditions:{type:"defaultpacket",starttime:"",endtime:"",ipv4_src_addr:"",ipv4_dst_addr:"",l4_src_port:"",l4_dst_port:"",protocol_name:"",application_layer_protocol:"",encryption_based_protection_protocol:"",packet_source:""},searchConditions:{id:""},tableHead:[{prop:"logtime",label:"时间",width:""},{prop:"ipv4_src_addr",label:"源地址",width:""},{prop:"ipv4_dst_addr",label:"目的地址",width:""},{prop:"l4_src_port",label:"源端口",width:""},{prop:"l4_dst_port",label:"目的端口",width:""},{prop:"protocol_name",label:"传输层协议",width:""},{prop:"application_layer_protocol",label:"应用层协议",width:""},{prop:"encryption_based_protection_protocol",label:"加密协议",width:""},{prop:"packet_source",label:"数据来源",width:""},{prop:"tools",label:"操作",width:"60",btns:[{icon:"el-icon-tickets",text:"查看详情",btnType:"readDetails",clickFun:function(e,i){t.layerObj.layerState=!0,t.layerObj.detailData=e}},{icon:"el-icon-circle-close",text:"删除",btnType:"removeItem",clickFun:function(e,i){t.$refs.logContent.removeParams([e])}}]}]}},created:function(){},watch:{htmlTitle:function(){this.searchConditions=n()({},this.formConditions)}},methods:{timeChanage:function(t){null!==t?(this.formConditions.starttime=t[0],this.formConditions.endtime=t[1]):(this.formConditions.starttime="",this.formConditions.endtime="")},searchHttpLogs:function(){""===this.formConditions.starttime||""===this.formConditions.endtime?layer.msg("查询时间条件不允许为空，时间跨度过大可能导致相应慢",{icon:5}):this.searchConditions=n()({},this.formConditions)}},beforeRouteEnter:function(t,e,i){i(function(e){if(e.$options.name=t.name,$.isEmptyObject(t.query)){var i=Object(a.e)("yyyy-mm-dd HH:MM:SS",new Date),o=new Date;o.setTime(o.getTime()-864e5*e.$store.state.beforeDay),o=Object(a.e)("yyyy-mm-dd HH:MM:SS",o),e.timeArr=[o,i],e.formConditions.endtime=i,e.formConditions.starttime=o,e.searchHttpLogs()}else e.timeArr=[t.query.starttime,t.query.endtime],e.formConditions.endtime=t.query.endtime,e.formConditions.starttime=t.query.starttime,Object(a.m)(t.name,"logsManage/flowLogs.vue","日志"),"node"===t.query.clickType?("ip"===t.query.type?e.formConditions.multifield_ip=t.query.val:"url"===t.query.type&&(e.formConditions[t.query.kname]=t.query.val),e.htmlTitle=t.query.val):"link"===t.query.clickType&&("ip"===t.query.type?(e.formConditions.ipv4_src_addr=t.query.ipv4_src_addr,e.formConditions.ipv4_dst_addr=t.query.ipv4_dst_addr,e.htmlTitle=t.query.ipv4_src_addr+" - "+t.query.ipv4_dst_addr):"ip-url"===t.query.type&&(e.formConditions.ipv4_src_addr=t.query.ipv4_src_addr,e.formConditions[t.query.kname]=t.query.targetVal,e.htmlTitle=t.query.ipv4_src_addr+" - "+t.query.targetVal))})},components:{vLogscontent:s.default}}),l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-bg http-content"},[i("div",{staticClass:"top-title"},[t._v(t._s(t.htmlTitle)+" 日志")]),t._v(" "),i("div",{staticClass:"search-wapper",staticStyle:{height:"61px"}},[i("el-form",{staticClass:"demo-form-inline http-conditions-wapper",attrs:{inline:!0,onsubmit:"return false"}},[i("div",{staticClass:"condition-top"},[i("div",{staticStyle:{width:"384px"}},[i("span",{staticClass:"input-lable"},[t._v("日期范围")]),t._v(" "),i("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至",size:"mini","start-placeholder":"开始日期","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"end-placeholder":"结束日期"},on:{change:t.timeChanage},model:{value:t.timeArr,callback:function(e){t.timeArr=e},expression:"timeArr"}})],1),t._v(" "),i("div",[i("span",{staticClass:"input-lable"},[t._v("源地址")]),t._v(" "),i("el-input",{staticStyle:{"border-radius":"0"},attrs:{size:"mini",placeholder:""},model:{value:t.formConditions.ipv4_src_addr,callback:function(e){t.$set(t.formConditions,"ipv4_src_addr",e)},expression:"formConditions.ipv4_src_addr"}})],1),t._v(" "),i("div",[i("span",{staticClass:"input-lable"},[t._v("目的地址")]),t._v(" "),i("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.formConditions.ipv4_dst_addr,callback:function(e){t.$set(t.formConditions,"ipv4_dst_addr",e)},expression:"formConditions.ipv4_dst_addr"}})],1),t._v(" "),i("div",[i("span",{staticClass:"input-lable"},[t._v("源端口")]),t._v(" "),i("el-input",{staticStyle:{width:"66px"},attrs:{size:"mini",placeholder:""},model:{value:t.formConditions.l4_src_port,callback:function(e){t.$set(t.formConditions,"l4_src_port",e)},expression:"formConditions.l4_src_port"}})],1),t._v(" "),i("div",[i("span",{staticClass:"input-lable"},[t._v("目的端口")]),t._v(" "),i("el-input",{staticStyle:{width:"66px"},attrs:{size:"mini",placeholder:""},model:{value:t.formConditions.l4_dst_port,callback:function(e){t.$set(t.formConditions,"l4_dst_port",e)},expression:"formConditions.l4_dst_port"}})],1),t._v(" "),i("div",[i("span",{staticClass:"input-lable",staticStyle:{width:"86px"}},[t._v("数据来源")]),t._v(" "),i("el-select",{attrs:{size:"mini"},model:{value:t.formConditions.packet_source,callback:function(e){t.$set(t.formConditions,"packet_source",e)},expression:"formConditions.packet_source"}},t._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),i("div",{staticClass:"condition-bottom"},[i("div",{staticStyle:{width:"33.333%"}},[i("span",{staticClass:"input-lable"},[t._v("传输层协议")]),t._v(" "),i("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.formConditions.protocol_name,callback:function(e){t.$set(t.formConditions,"protocol_name",e)},expression:"formConditions.protocol_name"}})],1),t._v(" "),i("div",{staticStyle:{width:"33.333%"}},[i("span",{staticClass:"input-lable"},[t._v("应用层协议")]),t._v(" "),i("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.formConditions.application_layer_protocol,callback:function(e){t.$set(t.formConditions,"application_layer_protocol",e)},expression:"formConditions.application_layer_protocol"}})],1),t._v(" "),i("div",{staticStyle:{width:"33.333%"}},[i("span",{staticClass:"input-lable"},[t._v("加密协议")]),t._v(" "),i("el-input",{attrs:{size:"mini",placeholder:""},model:{value:t.formConditions.encryption_based_protection_protocol,callback:function(e){t.$set(t.formConditions,"encryption_based_protection_protocol",e)},expression:"formConditions.encryption_based_protection_protocol"}})],1)])]),t._v(" "),i("el-button",{staticClass:"searchHttpLogs",attrs:{size:"mini",type:"primary"},on:{click:t.searchHttpLogs}},[t._v("检索")])],1),t._v(" "),i("div",{staticClass:"content-wapper"},[i("v-logscontent",{ref:"logContent",attrs:{searchConditions:t.searchConditions,tableHead:t.tableHead,searchUrl:t.searchUrl,layerObj:t.layerObj,moreDeleteBtn:!0}})],1)])},staticRenderFns:[]};var d=i("VU/8")(r,l,!1,function(t){i("U/SR")},null,null);e.default=d.exports}});