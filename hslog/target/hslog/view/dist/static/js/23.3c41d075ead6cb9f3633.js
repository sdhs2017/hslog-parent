webpackJsonp([23],{LVvm:function(t,a){},"s+Se":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={name:"controlCenter",data:function(){return{state:"未开启"}},created:function(){setInterval(this.getServiceStatus,5e3)},methods:{getServiceStatus:function(){var t=this;this.$nextTick(function(){t.$axios.post(t.$baseUrl+"/collector/stateKafkaCollector.do","").then(function(a){!0===a.data[0].state?t.state="已开启":!1===a.data[0].state?t.state="未开启":console.log(data)}).catch(function(t){})})},initialize:function(){var t=this;layer.confirm("是否初始化？",{btn:["确定","取消"]},function(a){layer.close(a),layer.load(1),t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/log/createIndexAndMapping.do","").then(function(t){layer.closeAll("loading"),!0===t.data[0].state?layer.msg(t.data[0].msg,{icon:1}):!1===t.data[0].state&&layer.msg(t.data[0].msg,{icon:5})}).catch(function(t){layer.closeAll("loading"),layer.msg("初始化失败",{icon:5})})})},function(){layer.close()})},playService:function(){var t=this;layer.confirm("是否开启服务？",{btn:["确定","取消"]},function(a){layer.close(a),layer.load(1),t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/collector/startCollectorState.do","").then(function(a){layer.closeAll("loading"),!0===a.data[0].state?(layer.msg(a.data[0].msg,{icon:1}),t.state="已开启"):!1===a.data[0].state&&layer.msg(a.data[0].msg,{icon:5})}).catch(function(t){layer.closeAll("loading"),layer.msg("启动失败",{icon:5})})})},function(){layer.close()})},stopService:function(){var t=this;layer.confirm("是否停止服务？",{btn:["确定","取消"]},function(a){layer.close(a),layer.load(1),t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/collector/stopKafkaCollector.do","").then(function(a){layer.closeAll("loading"),!0===a.data[0].state?(layer.msg(a.data[0].msg,{icon:1}),t.state="未开启"):!1===a.data[0].state&&layer.msg(a.data[0].msg,{icon:5})}).catch(function(t){layer.closeAll("loading"),layer.msg("停止服务失败",{icon:5})})})},function(){layer.close()})},backup:function(){var t=this;layer.confirm("是否备份日志数据？",{btn:["确定","取消"]},function(a){layer.close(a),layer.load(1),t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/manage/createSnapshotByIndices.do","").then(function(t){layer.closeAll("loading"),!0===t.data[0].state?layer.msg(t.data[0].msg,{icon:1}):!1===t.data[0].state&&layer.msg(t.data[0].msg,{icon:5})}).catch(function(t){layer.closeAll("loading"),layer.msg("备份失败",{icon:5})})})},function(){layer.close()})},recover:function(){var t=this;layer.confirm("是否恢复日志数据？",{btn:["确定","取消"]},function(a){layer.close(a),layer.load(1),t.$nextTick(function(){t.$axios.post(t.$baseUrl+"/manage/restore.do","").then(function(t){layer.closeAll("loading"),!0===t.data[0].state?layer.msg(t.data[0].msg,{icon:1}):!1===t.data[0].state&&layer.msg(t.data[0].msg,{icon:5})}).catch(function(t){layer.closeAll("loading"),layer.msg("恢复失败",{icon:5})})})},function(){layer.close()})}}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content-bg"},[e("div",{staticClass:"top-title"},[t._v("控制中心")]),t._v(" "),e("div",{staticClass:"control-wapper"},[e("div",{staticClass:"serviceConBox"},[e("span",[t._v("服务状态：")]),t._v(" "),e("span",{staticClass:"serviceStatus",style:"未开启"===t.state?{color:"#d9534f"}:{color:"#1ab394"}},[t._v(t._s(t.state))])]),t._v(" "),e("div",{staticClass:"btnConBox"},[e("div",{staticClass:"btnConBoxTop"},[e("div",{staticClass:"serviceBtn",attrs:{id:"initialize",title:"点击初始化"},on:{click:t.initialize}},[e("i",{staticClass:"el-icon-lx-refresh"}),t._v(" "),e("p",{staticClass:"btnTitle"},[t._v("初始化")]),t._v(" "),e("p",{staticClass:"btnDescribe"},[t._v("对集群的数据结构进行初始化，保证日志数据正常采集到数据中心")])]),t._v(" "),e("div",{staticClass:"serviceBtn",attrs:{id:"play_service",title:"点击开启服务"},on:{click:t.playService}},[t._m(0),t._v(" "),t._m(1)])]),t._v(" "),e("div",{staticClass:"btnConBoxBottom"},[e("div",{staticClass:"serviceBtn",attrs:{id:"stop_service",title:"点击停止服务"},on:{click:t.stopService}},[e("i",{staticClass:"el-icon-circle-close"}),t._v(" "),e("p",{staticClass:"btnTitle"},[t._v("停止服务")]),t._v(" "),e("p",{staticClass:"btnDescribe"},[t._v("停止收集各个资产发送过来的日志数据")])]),t._v(" "),e("div",{staticClass:"serviceBtn",attrs:{id:"backup",title:"点击备份数据"},on:{click:t.backup}},[e("i",{staticClass:"el-icon-printer"}),t._v(" "),e("p",{staticClass:"btnTitle"},[t._v("备份")]),t._v(" "),e("p",{staticClass:"btnDescribe"},[t._v("对集群中的日志数据进行完整的备份操作")])]),t._v(" "),e("div",{staticClass:"serviceBtn",attrs:{id:"recover",title:"点击恢复备份"},on:{click:t.recover}},[e("i",{staticClass:"el-icon-refresh"}),t._v(" "),e("p",{staticClass:"btnTitle"},[t._v("恢复备份")]),t._v(" "),e("p",{staticClass:"btnDescribe"},[t._v("对删除后的数据进行恢复操作（需对删除的数据先进行备份操作）")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("i",{staticClass:"el-icon-caret-right"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("div",[a("p",{staticClass:"btnTitle"},[this._v("开启服务")]),this._v(" "),a("p",{staticClass:"btnDescribe"},[this._v("开始收集各个资产发送过来的日志数据，范式化后入库")])])])}]};var c=e("C7Lr")(s,i,!1,function(t){e("LVvm")},"data-v-697b094d",null);a.default=c.exports}});