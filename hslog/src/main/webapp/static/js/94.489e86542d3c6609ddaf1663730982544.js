webpackJsonp([94],{"48Vc":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("ID1p"),s=e("qTy0"),r=e("/sA3"),n=(e("8+FI"),{name:"chartsList",data:function(){var t=this;return{loading:!1,addChartsState:!1,busNames:{},tableHead:[{prop:"title",label:"标题",width:""},{prop:"type",label:"类型",width:"100",formatData:function(t){switch(t){case"bar":return"柱状图";case"line":return"折线图";case"pie":return"饼图";case"table":return"表格";case"metric":return"指标";default:return t}}},{prop:"description",label:"描述",width:""},{prop:"tools",label:"操作",width:"100",btns:[{icon:"el-icon-view",text:"查看",clickFun:function(a,e){t.seeChart(a,e)}},{icon:"el-icon-edit",text:"编辑",formatData:function(t){return t.editable},clickFun:function(a,e){t.reviseChart(a,e)}},{icon:"el-icon-error",text:"删除",formatData:function(t){return t.deletable},clickFun:function(a,e){t.removeChart(a,e)}}]},{prop:"",label:"状态",width:"60",formatData:function(t,a){if(!a.deletable&&!a.editable)return'<i class="el-icon-lock" style="color:#e4956d"></i>'}}],tableData:[]}},created:function(){this.getChartsList()},methods:{getChartsList:function(){var t=this;this.$nextTick(function(){t.loading=!0,t.$axios.post(t.$baseUrl+"/BI/getVisualizations.do","").then(function(a){t.loading=!1;var e=a.data;"true"==e.success?t.tableData=e.data:layer.msg(a.data.message,{icon:5})}).catch(function(a){t.loading=!1,layer.msg("获取数据失败",{icon:5})})})},goToHtml:function(t,a){switch(t){case"bar":Object(r.l)("barChart","dashboard/barChart.vue",{},"创建柱状图"),this.addChartsState=!1;break;case"pie":Object(r.l)("barChart","dashboard/pieChart.vue",{},"创建饼图"),this.addChartsState=!1;break;case"line":Object(r.l)("barChart","dashboard/lineChart.vue",{},"创建折线图"),this.addChartsState=!1;break;case"metric":Object(r.l)("metricChart","dashboard/metricChart.vue",{},"创建指标"),this.addChartsState=!1;break;case"table":Object(r.l)("metricChart","dashboard/dynamicTable.vue",{},"创建指标"),this.addChartsState=!1}},seeChart:function(t,a){switch(t.type){case"bar":Object(r.l)("seeBarChart"+t.id,"dashboard/barChart.vue",{name:t.title,id:t.id,type:"see"}," 查看");break;case"pie":Object(r.l)("seePieChart"+t.id,"dashboard/pieChart.vue",{name:t.title,id:t.id,type:"see"}," 查看");break;case"line":Object(r.l)("seeLineChart"+t.id,"dashboard/lineChart.vue",{name:t.title,id:t.id,type:"see"}," 查看");break;case"metric":Object(r.l)("seeMetricChart"+t.id,"dashboard/metricChart.vue",{name:t.title,id:t.id,type:"see"}," 查看");break;case"table":Object(r.l)("seeDynamicTable"+t.id,"dashboard/dynamicTable.vue",{name:t.title,id:t.id,type:"see"}," 查看")}},reviseChart:function(t,a){switch(t.type){case"bar":Object(r.l)("editBarChart"+t.id,"dashboard/barChart.vue",{name:t.title,id:t.id,type:"edit"}," 编辑");break;case"pie":Object(r.l)("editPieChart"+t.id,"dashboard/pieChart.vue",{name:t.title,id:t.id,type:"edit"}," 编辑");break;case"line":Object(r.l)("editLineChart"+t.id,"dashboard/lineChart.vue",{name:t.title,id:t.id,type:"edit"}," 编辑");break;case"metric":Object(r.l)("editMetricChart"+t.id,"dashboard/metricChart.vue",{name:t.title,id:t.id,type:"edit"}," 编辑");break;case"table":Object(r.l)("editDynamicTable"+t.id,"dashboard/dynamicTable.vue",{name:t.title,id:t.id,type:"edit"}," 编辑")}},removeChart:function(t,a){var e=this;layer.confirm("您确定删除么？",{btn:["确定","取消"]},function(a){e.$nextTick(function(){e.loading=!0,e.$axios.post(e.$baseUrl+"/BI/deleteVisualizationById.do",e.$qs.stringify({id:t.id})).then(function(t){e.loading=!1,"true"==t.data.success?(layer.msg(t.data.message,{icon:1}),setTimeout(function(){e.getChartsList()},1e3)):layer.msg(t.data.message,{icon:5})}).catch(function(t){e.loading=!1})})})}},components:{vSearchForm:i.default,vBasetable:s.default}}),l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-bg",attrs:{"element-loading-background":"rgba(26,36,47, 0.2)"}},[e("div",{staticClass:"top-title"},[t._v("图表列表")]),t._v(" "),e("div",{staticClass:"tools-wapper"},[e("el-button",{attrs:{type:"primary",plain:""},on:{click:function(a){t.addChartsState=!0}}},[t._v("添加")]),t._v(" "),e("el-button",{attrs:{type:"primary",plain:""},on:{click:t.getChartsList}},[t._v("刷新")])],1),t._v(" "),e("div",{staticClass:"table-wapper"},[e("v-basetable",{attrs:{tableHead:t.tableHead,tableData:t.tableData,busName:t.busNames}})],1),t._v(" "),e("el-dialog",{attrs:{title:"选择图表类型",visible:t.addChartsState,width:"440px"},on:{"update:visible":function(a){t.addChartsState=a}}},[e("ul",{staticClass:"chart-type-list"},[e("li",{on:{click:function(a){t.addChartsState=!1}}},[e("router-link",{attrs:{to:{name:"barChart"}}},[e("p",{staticClass:"li-top-i"},[e("i",{staticClass:"el-icon-s-data"})]),t._v(" "),e("p",{staticClass:"li-bottom-tit"},[t._v("柱状图")])])],1),t._v(" "),e("li",{on:{click:function(a){t.addChartsState=!1}}},[e("router-link",{attrs:{to:{name:"lineChart"}}},[e("p",{staticClass:"li-top-i"},[e("i",{staticClass:"el-icon-share"})]),t._v(" "),e("p",{staticClass:"li-bottom-tit"},[t._v("折线图")])])],1),t._v(" "),e("li",{on:{click:function(a){t.addChartsState=!1}}},[e("router-link",{attrs:{to:{name:"pieChart"}}},[e("p",{staticClass:"li-top-i"},[e("i",{staticClass:"el-icon-pie-chart"})]),t._v(" "),e("p",{staticClass:"li-bottom-tit"},[t._v("饼图")])])],1),t._v(" "),e("li",{on:{click:function(a){t.addChartsState=!1}}},[e("router-link",{attrs:{to:{name:"metricChart"}}},[e("p",{staticClass:"li-top-i",staticStyle:{"font-style":"italic","font-size":"27px","font-family":"'electronicFont'"}},[t._v("123")]),t._v(" "),e("p",{staticClass:"li-bottom-tit"},[t._v("指标")])])],1),t._v(" "),e("li",{on:{click:function(a){t.addChartsState=!1}}},[e("router-link",{attrs:{to:{name:"dynamicTable"}}},[e("p",{staticClass:"li-top-i"},[e("i",{staticClass:"el-icon-date"})]),t._v(" "),e("p",{staticClass:"li-bottom-tit"},[t._v("表格")])])],1)])])],1)},staticRenderFns:[]};var c=e("VU/8")(n,l,!1,function(t){e("UY/o")},"data-v-26bd66d8",null);a.default=c.exports},"UY/o":function(t,a){}});