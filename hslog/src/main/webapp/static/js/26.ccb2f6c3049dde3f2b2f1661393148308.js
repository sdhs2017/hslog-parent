webpackJsonp([26],{"7NzC":function(t,e){},aS4u:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("iIsE"),i=n("8+FI"),r=n("58QH"),s=n("/sA3"),c={name:"urlIpRanking",data:function(){return{loading:!1,rankingTitle:"应用资产 Top10 排行",rankingData:[],busName:"urlRanking",timepicker:"",currentItemVal:"",selectedMenuState:!1,menuLeft:"",menuTop:""}},computed:{menuLocation:function(){return{top:this.menuTop+"px",left:this.menuLeft+"px"}}},created:function(){var t=this;i.default.$on(this.busName,function(e){t.selectedMenuState=!0,t.menuLeft=e.menuLeft,t.menuTop=e.menuTop,t.currentItemVal=e.text}),i.default.$on("urlIpRanking",function(e){t.timepicker=e,t.getRankingData(t.timepicker)})},mounted:function(){Object(s.j)($(".ranking-wapper"))},beforeDestroy:function(){i.default.$off(this.busName),i.default.$off("urlIpRanking")},methods:{getRankingData:function(t){var e=this;this.loading=!0,this.$nextTick(function(){e.$axios.post(e.$baseUrl+"/flow/getTopGroupByIPOrPort.do",e.$qs.stringify({groupfiled:"ipv4_dst_addr",application_layer_protocol:"http,https",starttime:t[0],endtime:t[1]})).then(function(t){e.loading=!1;var n=[];t.data[0].ipv4_dst_addr.forEach(function(t){var e={};e.text=t.IpOrPort,e.count=t.count,n.push(e)}),e.rankingData=n}).catch(function(t){e.loading=!1,layer.msg("获取数据失败",{icon:5})})})},rankingMenu:function(){var t={};t.val=this.currentItemVal,t.starttime=this.timepicker[0],t.endtime=this.timepicker[1],Object(s.l)("urlRanking"+this.currentItemVal,"logsManage/urlRanking.vue",t,"应用画像")},graphMenu:function(){var t={};t.val=this.currentItemVal,t.type="ip",t.starttime=this.timepicker[0],t.endtime=this.timepicker[1],Object(s.l)("urlGraph"+this.currentItemVal,"logsManage/urlGraph.vue",t,"业务流")},timepickerChange:function(){null===this.timepicker&&(this.timepicker=["",""]),this.getRankingData(this.timepicker)}},components:{vRanking:a.default,baseDate:r.default}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-bg",attrs:{"element-loading-background":"rgba(26,36,47, 0.2)"}},[n("div",{staticClass:"top-title"},[t._v("应用资产画像\n        "),n("div",{staticClass:"datepicker-wapper",staticStyle:{"padding-left":"20px",float:"right","margin-right":"10px"}},[n("baseDate",{attrs:{type:"datetimerange",busName:"urlIpRanking"}})],1)]),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"ranking-wapper"},[n("v-ranking",{attrs:{title:t.rankingTitle,rankingArr:t.rankingData,busName:t.busName}})],1)]),t._v(" "),t.selectedMenuState?n("div",{staticClass:"zz",on:{click:function(e){t.selectedMenuState=!1}}},[n("div",{staticClass:"selected-menu animated bounceIn",style:t.menuLocation},[n("div",{staticClass:"menu-ranking",on:{click:t.rankingMenu}},[t._v("排行榜")]),t._v(" "),n("div",{staticClass:"men-graph",on:{click:t.graphMenu}},[t._v("业务流")]),t._v(" "),n("div",{staticClass:"menu-cancle",on:{click:function(e){t.selectedMenuState=!1}}},[t._v("取消")])])]):t._e()])},staticRenderFns:[]};var o=n("VU/8")(c,u,!1,function(t){n("7NzC")},"data-v-e28f861c",null);e.default=o.exports}});