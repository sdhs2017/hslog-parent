webpackJsonp([96],{"3PUr":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("XLwt"),o=a.n(i),s=(a("PdmY"),a("9OQl"),a("oINY")),n=a("42rZ"),r=a("KxiM"),l=(a("/sA3"),["01","02","03","04","05","06","07","08","09","10","11","12"]),c=["Sun.","Mon.","Tues.","Wed.","Thur.","Fri.","Sat."],d={name:"flowIndex",data:function(){return{interTime:"",timeInterval:5e3,dataTime:3600,date:"",hour:"",min:"",sec:"",flowTotle:"",params:{intervalValue:"5",intervalType:"second",starttime:"",endtime:"",last:"1-hour"},param2:{intervalValue:"5",intervalType:"second",starttime:"",endtime:"",last:"5-min"},intervalObj:{state:!0,interval:"5000"}}},created:function(){this.setDate(),this.getFlowTotle();var t=navigator.userAgent,e=!t.match(/(iPad).*OS\s([\d_]+)/)&&t.match(/(iPhone\sOS)\s([\d_]+)/),a=t.match(/(Android)\s+([\d.]+)/);e||a||this.$router.push("/flowIndex")},mounted:function(){this.setEarth2(),setInterval(this.getFlowTotle,5e3)},methods:{setDate:function(){var t=new Date;t.setDate(t.getDate()),this.date=t.getFullYear()+"/"+l[t.getMonth()]+"/"+t.getDate()+" "+c[t.getDay()];var e=(new Date).getHours();this.hour=(e<10?"0":"")+e;var a=(new Date).getMinutes();this.min=(a<10?"0":"")+a;var i=(new Date).getSeconds();this.sec=(i<10?"0":"")+i},getFlowTotle:function(){var t=this;this.$axios.post(this.$baseUrl+"/log/getIndicesCountByType.do",{}).then(function(e){t.flowTotle=parseInt(e.data[0].indices_defaultpacket).toLocaleString()}).catch(function(e){t.$Message.error(e)})},setEarth2:function(){var t=this;this.$axios.post(this.$baseUrl+"/flow/getMap.do",this.$qs.stringify({timeInterval:259200})).then(function(e){var a=[],i=[];e.data.forEach(function(t,e){i.push({type:"effectScatter",coordinateSystem:"geo",zlevel:3,rippleEffect:{brushType:"stroke"},label:{fontSize:18,show:!0,position:"right",formatter:"{b}"},itemStyle:{normal:{color:"#f5f802"}},data:[{name:t[0].name,value:t[0].value,symbolSize:10,label:{normal:{position:"right"}}}]},{type:"effectScatter",coordinateSystem:"geo",zlevel:3,rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"left",fontSize:18,formatter:"{b}"}},itemStyle:{normal:{color:"#f5f802"}},data:[{name:t[1].name,value:t[1].value,symbolSize:10,label:{normal:{position:"right"}}}]}),a.push({type:"lines3D",effect:{show:!0,period:3,trailLength:.1},lineStyle:{color:"#9ae5fc",width:1,opacity:.6},data:[[t[0].value,t[1].value]]})});var s=document.createElement("canvas"),n=o.a.init(s,null,{width:4096,height:2048});n.setOption({backgroundColor:"rgba(3,28,72,0.3)",title:{show:!0},geo:{type:"map",map:"world",left:0,top:0,right:0,bottom:0,boundingCoords:[[-180,90],[180,-90]],zoom:0,roam:!1,itemStyle:{borderColor:"#000d2d",normal:{areaColor:"#2455ad",borderColor:"#000c2d"},emphasis:{areaColor:"#357cf8"}},emphasis:{label:{show:!1}},label:{fontSize:24}},series:i});var r={backgroundColor:"rgba(0,0,0,0)",globe:{baseTexture:n,top:"middle",left:"center",displacementScale:0,environment:"none",shading:"color",viewControl:{distance:240,autoRotate:!1,autoRotateAfterStill:5,targetCoord:[116.46,39.92]}},series:a},l=o.a.init(t.$refs.mybox);l.setOption(r,!0),window.addEventListener("resize",function(){l.resize()})}).catch(function(e){t.$Message.error(e)})},setInterFun:function(){this.interTime=setInterval(function(){},this.timeInterval)}},beforeRouteEnter:function(t,e,a){a(function(t){t.setInterFun()})},beforeRouteLeave:function(t,e,a){clearInterval(this.interTime),a()},components:{eqIpPacket_bar:s.default,dstPortAll_pie:n.default,allflow_timeline:r.default}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"time-wapper"},[t._v(t._s(t.date)+" "+t._s(t.hour)+":"+t._s(t.min)+":"+t._s(t.sec))]),t._v(" "),a("div",{ref:"mybox",staticClass:"world-wapper",attrs:{id:"world-wapper"}}),t._v(" "),a("div",{staticClass:"flow-count-wapper"},[a("p",{staticClass:"flow-count-tit"},[t._v("已收集流量数")]),t._v(" "),a("p",{staticClass:"flow-count-con"},t._l(t.flowTotle,function(e,i){return","!==e?a("span",{key:i},[t._v(t._s(e))]):a("b",[t._v(t._s(e))])}),0)]),t._v(" "),a("div",{staticClass:"item-wapper"},[a("div",{staticClass:"item-title"},[t._v("实时流量")]),t._v(" "),a("div",{staticClass:"item-content"},[a("allflow_timeline",{attrs:{params:t.param2,setIntervalObj:t.intervalObj,baseConProp:{title:""}}})],1)]),t._v(" "),a("div",{staticClass:"item-wapper"},[a("div",{staticClass:"item-title"},[t._v("资产（IP）数据包个数")]),t._v(" "),a("div",{staticClass:"item-content"},[a("eqIpPacket_bar",{attrs:{params:t.params,setIntervalObj:t.intervalObj}})],1)]),t._v(" "),a("div",{staticClass:"item-wapper"},[a("div",{staticClass:"item-title"},[t._v("目的端口总流量")]),t._v(" "),a("div",{staticClass:"item-content"},[a("dstPortAll_pie",{attrs:{params:t.params,setIntervalObj:t.intervalObj}})],1)])])},staticRenderFns:[]};var u=a("VU/8")(d,m,!1,function(t){a("3Ygj")},"data-v-22b57ba2",null);e.default=u.exports},"3Ygj":function(t,e){}});