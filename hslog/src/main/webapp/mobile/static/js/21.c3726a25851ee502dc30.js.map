{"version":3,"sources":["webpack:///src/components/equipment/equipmentCharts.vue","webpack:///./src/components/equipment/equipmentCharts.vue?e2e5","webpack:///./src/components/equipment/equipmentCharts.vue"],"names":["equipmentCharts","name","data","loading1","loading2","loading3","loading4","editable","currentDateVal1","currentDateVal2","currentDateVal3","currentDateVal4","equipmentId","equipmentName","logsCount","errorLogsCount","eventCount","dangerEventCount","hourLogsCountData","baseConfig","title","xAxisName","yAxisName","hoverText","xAxisArr","yAxisArr","hourEventCountData","logTypeData","rotate","eventTypeData","eventTypeData2","mounted","methods","goBack","this","$router","push","getLogCount","id","_this","$nextTick","$post","hsData","stringify_default","fields.equipmentid","then","res","indices","indiceserror","catch","err","console","log","getEventCount","_this2","events","eventserror","getHourLogsCount","time","_this3","$route","query","starttime","endtime","xVal","yVal","i","hour","count","getHourEventsCount","_this4","whole","color","high","middle","low","getlogTypeData","_this5","groupField","getEventTypeData","_this6","pieVAl","pieObj","value","dateChange1","dateChange2","dateChange3","dateChange4","watch","handler","o","n","currentDate","Object","common","Date","beforeRouteEnter","to","from","next","vm","$options","obj","path","component","sessionStorage","setItem","components","vEcharts","echarts","equipment_equipmentCharts","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","_v","_s","attrs","value-format","size","type","placeholder","change","model","callback","$$v","expression","directives","rawName","element-loading-background","echartType","echartData","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/21.c3726a25851ee502dc30.js","sourcesContent":["<template>\n    <div class=\"content-bg\">\n      <div class=\"top-title\">\n        <span class=\"goBack\" @click=\"goBack()\">返回</span>\n        <b>{{equipmentName}}统计</b>\n        <span></span>\n      </div>\n      <ul class=\"count-wapper\">\n        <li>\n          <div class=\"count-tit\">日志总数</div>\n          <div class=\"count-val\">{{logsCount}}</div>\n        </li>\n        <li>\n          <div class=\"count-tit\">ERROR日志</div>\n          <div class=\"count-val err-val\">{{errorLogsCount}}</div>\n        </li>\n        <li>\n          <div class=\"count-tit\">事件总数</div>\n          <div class=\"count-val\">{{eventCount}}</div>\n        </li>\n        <li>\n          <div class=\"count-tit\">高危事件</div>\n          <div class=\"count-val err-val\">{{dangerEventCount}}</div>\n        </li>\n      </ul>\n      <div class=\"item-wapper\" >\n        <div class=\"item-title\">每小时日志数量统计\n          <el-date-picker\n            class=\"time-wapper\"\n            value-format=\"yyyy-MM-dd\"\n            v-model=\"currentDateVal1\"\n            size=\"mini\"\n            type=\"date\"\n            :editable='editable'\n            @change=\"dateChange1\"\n            placeholder=\"选择日期\">\n          </el-date-picker>\n        </div>\n        <div class=\"item-content\" v-loading=\"loading1\"  element-loading-background=\"rgba(48, 62, 78, 0.5)\">\n          <v-echarts echartType=\"line\" :echartData = \"this.hourLogsCountData\" ></v-echarts>\n        </div>\n      </div>\n      <div class=\"item-wapper\">\n        <div class=\"item-title\">每小时事件数量统计\n          <el-date-picker\n            class=\"time-wapper\"\n            value-format=\"yyyy-MM-dd\"\n            v-model=\"currentDateVal2\"\n            size=\"mini\"\n            :editable='editable'\n            type=\"date\"\n            @change=\"dateChange2\"\n            placeholder=\"选择日期\">\n          </el-date-picker>\n        </div>\n        <div class=\"item-content\" v-loading=\"loading2\"  element-loading-background=\"rgba(48, 62, 78, 0.5)\">\n          <v-echarts echartType=\"moreline\" :echartData = \"this.hourEventCountData\" ></v-echarts>\n        </div>\n      </div>\n      <div class=\"item-wapper\">\n        <div class=\"item-title\">日志级别数量统计\n          <el-date-picker\n            class=\"time-wapper\"\n            value-format=\"yyyy-MM-dd\"\n            v-model=\"currentDateVal3\"\n            size=\"mini\"\n            :editable='editable'\n            type=\"date\"\n            @change=\"dateChange3\"\n            placeholder=\"选择日期\">\n          </el-date-picker>\n        </div>\n        <div class=\"item-content\" v-loading=\"loading3\"  element-loading-background=\"rgba(48, 62, 78, 0.5)\">\n          <v-echarts echartType=\"bar\" :echartData = \"this.logTypeData\" ></v-echarts>\n        </div>\n      </div>\n      <div class=\"item-wapper\" v-loading=\"loading4\"  element-loading-background=\"rgba(48, 62, 78, 0.5)\">\n        <div class=\"item-title\">事件类型数量统计\n          <el-date-picker\n            class=\"time-wapper\"\n            value-format=\"yyyy-MM-dd\"\n            v-model=\"currentDateVal4\"\n            size=\"mini\"\n            :editable='editable'\n            type=\"date\"\n            @change=\"dateChange4\"\n            placeholder=\"选择日期\">\n          </el-date-picker>\n        </div>\n        <div class=\"item-content\">\n          <v-echarts echartType=\"bar\" :echartData = \"this.eventTypeData\" ></v-echarts>\n        </div>\n        <div class=\"item-content\">\n          <v-echarts echartType=\"pie\" :echartData = \"this.eventTypeData2\" ></v-echarts>\n        </div>\n      </div>\n    </div>\n    \n</template>\n\n<script>\n  import vEcharts from '../common/echarts'\n  import {dateFormat} from \"../../../static/js/common\";\n\n  export default {\n\t\tname: \"equipmentCharts\",\n\t\tdata() {\n\t\t\treturn {\n        loading1:false,\n        loading2:false,\n        loading3:false,\n        loading4:false,\n        editable:false,\n        currentDateVal1:'',\n        currentDateVal2:'',\n        currentDateVal3:'',\n        currentDateVal4:'',\n\t\t\t  //资产id\n        equipmentId:'',\n        //资产名\n\t\t\t  equipmentName:'',\n        //日志条数\n        logsCount:'',\n        //error日志条数\n        errorLogsCount:'',\n        //事件条数\n        eventCount:'',\n        //高危事件条数\n        dangerEventCount:'',\n        //每小时日志数量\n        hourLogsCountData:{\n          baseConfig:{\n            title:'',\n            xAxisName:'时间',\n            yAxisName:'数量',\n            hoverText:''\n          },\n          xAxisArr:[],\n          yAxisArr:[]\n        },\n        //每小时事件数量\n        hourEventCountData:{\n          baseConfig:{\n            title:'',\n            xAxisName:'时间',\n            yAxisName:'数量',\n            hoverText:''\n          },\n          xAxisArr:[\"00\",\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\"],\n          yAxisArr:[]\n        },\n        //日志类型数量\n        logTypeData:{\n          baseConfig:{\n            title:'',\n            xAxisName:'日志\\n类型',\n            yAxisName:'数量',\n            rotate:'25',\n            hoverText:''\n          },\n          xAxisArr:[],\n          yAxisArr:[]\n        },\n        //事件类型数量\n        eventTypeData:{\n          baseConfig:{\n            title:'',\n            xAxisName:'事件\\n类型',\n            rotate:'25',\n            yAxisName:'数量',\n            hoverText:''\n          },\n          xAxisArr:[],\n          yAxisArr:[]\n        },\n        eventTypeData2:{\n          baseConfig:{\n            title:'',\n            hoverText:'百分比'\n          },\n          xAxisArr:[],\n          yAxisArr:[]\n        }\n      }\n\t\t},\n    mounted(){\n\n    },\n    methods:{\n\t\t  /*返回上一级*/\n\t\t  goBack(){\n        this.$router.push('/equipmentList');//返回上一层\n      },\n      /*获取日志总数于错误日志数*/\n      getLogCount(id){\n        this.$nextTick(()=>{\n          this.$post('/ecsCommon/getIndicesCount.do',{\n            hsData:JSON.stringify({'fields.equipmentid':id})\n          })\n            .then((res)=>{\n              this.logsCount = res[0].indices;\n              this.errorLogsCount = res[0].indiceserror;\n            })\n            .catch((err)=>{\n              console.log(err)\n            })\n        })\n      },\n      /*获取事件总数于高危事件数*/\n      getEventCount(id){\n        this.$nextTick(()=>{\n          this.$post('/ecsSyslog/getEventsCount.do',{\n            hsData:JSON.stringify({'fields.equipmentid':id})\n          })\n            .then((res)=>{\n              this.eventCount = res[0].events;\n              this.dangerEventCount = res[0].eventserror;\n            })\n            .catch((err)=>{\n              console.log(err)\n            })\n        })\n      },\n      /*获取每小时日志数量统计*/\n      getHourLogsCount(time){\n        this.loading1 = true;\n        this.$nextTick(()=>{\n          this.$post('/ecsCommon/getLogCountGroupByTime.do',{\n            hsData:JSON.stringify({'fields.equipmentid':this.$route.query.id}),\n            starttime:time+ ' 00:00:00',\n            endtime:time+ ' 23:59:59'\n          })\n            .then((res)=>{\n              this.loading1 = false;\n              let xVal = [];\n              let yVal = [];\n              for(let i in res){\n                xVal.push(res[i].hour)\n                yVal.push(res[i].count)\n              }\n              this.hourLogsCountData.xAxisArr = xVal;\n              this.hourLogsCountData.yAxisArr = yVal;\n            })\n            .catch((err)=>{\n              this.loading1 = false;\n              console.log(err)\n            })\n        })\n      },\n      /*获取事件数量*/\n      getHourEventsCount(time){\n        this.loading2 = true;\n        this.$nextTick(()=>{\n          this.$post('/ecsSyslog/getCountGroupByEventType.do',{\n            hsData:JSON.stringify({'fields.equipmentid':this.$route.query.id}),\n            starttime:time+ ' 00:00:00',\n            endtime:time+ ' 23:59:59',\n          })\n            .then((res)=>{\n              this.loading2 = false;\n              let whole = {\n                name:'全部',\n                color:'#61a0a8',\n                data:[]\n              }\n              let high = {\n                name:'高危',\n                color:'#c64541',\n                data:[]\n              }\n              let middle = {\n                name:'中危',\n                color:'#d48265',\n                data:[]\n              }\n              let low = {\n                name:'普通',\n                color:'#95c9b1',\n                data:[]\n              }\n              for (let i = 0;i<24;i++){\n                whole.data.push(res[0][i].count);\n                high.data.push(res[1][i].count);\n                middle.data.push(res[2][i].count);\n                low.data.push(res[3][i].count);\n              }\n              this.hourEventCountData.yAxisArr=[];\n              this.hourEventCountData.yAxisArr.push(whole);\n              this.hourEventCountData.yAxisArr.push(high);\n              this.hourEventCountData.yAxisArr.push(middle);\n              this.hourEventCountData.yAxisArr.push(low);\n            })\n            .catch((err)=>{\n              this.loading2 = false;\n              console.log(err)\n            })\n        })\n      },\n      /*获取日志类型数量*/\n      getlogTypeData(time){\n        this.loading3 = true;\n        this.$nextTick(()=>{\n          this.$post('/ecsCommon/getCountGroupByParam.do',{\n            hsData:JSON.stringify({'fields.equipmentid':this.$route.query.id}),\n            starttime:time+ ' 00:00:00',\n            endtime:time+ ' 23:59:59',\n            groupField:'log.level',\n          })\n            .then((res)=>{\n              this.loading3 = false;\n              let xVal = [];\n              let yVal = [];\n              for(let i in res[0]){\n                xVal.push(i);\n                yVal.push(res[0][i]);\n              }\n              this.logTypeData.xAxisArr = xVal;\n              this.logTypeData.yAxisArr = yVal;\n            })\n            .catch((err)=>{\n              this.loading3 = false;\n              console.log(err)\n            })\n        })\n      },\n      /*获取事件类型数量*/\n      getEventTypeData(time){\n        this.loading4 = true;\n        this.$nextTick(()=>{\n          this.$post('/ecsCommon/getCountGroupByParam.do',{\n            hsData:JSON.stringify({'fields.equipmentid':this.$route.query.id}),\n            starttime:time+ ' 00:00:00',\n            endtime:time+ ' 23:59:59',\n            groupField:'event.action',\n          })\n            .then((res)=>{\n              this.loading4 = false;\n              let xVal = [];\n              let yVal = [];\n              let pieVAl = [];\n              for(let i in res[0]){\n                xVal.push(i);\n                yVal.push(res[0][i]);\n                let pieObj = {};\n                pieObj.value = res[0][i];\n                pieObj.name = i;\n                pieVAl.push(pieObj)\n              }\n              this.eventTypeData.xAxisArr = xVal;\n              this.eventTypeData.yAxisArr = yVal;\n              this.eventTypeData2.yAxisArr = pieVAl;\n            })\n            .catch((err)=>{\n              this.loading4 = false;\n              console.log(err)\n            })\n        })\n      },\n      /**/\n      dateChange1(){\n        this.getHourLogsCount(this.currentDateVal1)\n      },\n      dateChange2(){\n        this.getHourEventsCount(this.currentDateVal2)\n      },\n      dateChange3(){\n        this.getlogTypeData(this.currentDateVal3)\n      },\n      dateChange4(){\n        this.getEventTypeData(this.currentDateVal4)\n      },\n    },\n    watch:{\n      equipmentId:{\n        handler:function(o,n){\n          let currentDate = dateFormat('yyyy-mm-dd',new Date())\n          this.currentDateVal1 = currentDate;\n          this.currentDateVal2 = currentDate;\n          this.currentDateVal3 = currentDate;\n          this.currentDateVal4 = currentDate;\n          this.getLogCount(this.equipmentId);\n          this.getEventCount(this.equipmentId);\n          this.getHourLogsCount(currentDate);\n          this.getHourEventsCount(currentDate);\n          this.getlogTypeData(currentDate);\n          this.getEventTypeData(currentDate);\n        },\n        //immediate: true\n      }\n    },\n    beforeRouteEnter(to, from, next) {\n      next (vm => {\n        // 这里通过 vm 来访问组件实例解决了没有 this 的问题\n        //修改此组件的name值\n        vm.$options.name = 'equipmentCharts'+ to.query.id;\n        vm.equipmentId = to.query.id;\n        //修改data参数\n        vm.equipmentName = to.query.name;\n        //vm.busName = 'equipmentEcharts'+to.query.id;\n        //将路由存放在本地 用来刷新页面时添加路由\n        let obj = {\n          path:'equipmentCharts'+to.query.id,\n          component:'equipment/equipmentCharts.vue',\n          title:'统计'\n        }\n        sessionStorage.setItem('/equipmentCharts'+to.query.id,JSON.stringify(obj))\n        /*if(vm.equipmentId === '' || vm.equipmentId !== to.query.id){\n          vm.equipmentId = to.query.id;\n          vm.logType = to.query.logType;\n        }*/\n\n      })\n\n    },\n    components:{\n      vEcharts\n    },\n\t}\n</script>\n\n<style scoped>\n  .top-title{\n    font-size: 0.5rem;\n    color: #185bff;\n    padding: 10px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  .goBack{\n    font-size: 0.4rem;\n  }\n  .item-wapper{\n    height: auto;\n    /*background: rgb(26,36,47);*/\n    background: url(\"../../../static/img/panel-l-t.png\");\n    background-size: 100% 100%;\n    margin:0.5rem 0.2rem;\n  }\n  .item-title{\n    height: 1rem;\n    line-height: 1rem;\n    font-size: 0.38rem;\n    text-align: left;\n    padding-left: 25px;\n    background: url(\"../../../static/img/title-bg.png\");\n    background-size: 100% 100%;\n  }\n  .time-wapper{\n    float: right;\n    width: 127px;\n    margin-right: 5px;\n  }\n  .time-wapper /deep/ .el-input__inner{\n    width: 100% !important;\n  }\n  .item-content{\n    /*height: calc(100% - 1rem);*/\n    height: 230px;\n    box-sizing: border-box;\n    padding: 0.5rem;\n\n  }\n  .count-wapper{\n    display: flex;\n    height: 90px;\n    justify-content: space-around;\n    font-size: 0.3rem;\n  }\n  .count-wapper li{\n    width: 24%;\n    height: 90px;\n    background: url(\"../../../static/img/panel-l-t.png\");\n    background-size: 100% 100%;\n    font-weight: 600;\n  }\n  .count-wapper .count-tit{\n    height: 40px;\n    line-height: 40px;\n    background: #0e1d59;\n    color: #39c0bd;\n  }\n  .count-wapper .count-val{\n    height: 50px;\n    line-height: 50px;\n    font-family: 'electronicFont';\n    font-size: 0.35rem;\n  }\n  .count-wapper .err-val{\n    color: #e4956d;\n  }\n  /deep/ .el-input__inner{\n    -webkit-border-radius: 0!important;\n    -moz-border-radius: 0!important;\n    border-radius:0!important;\n    position: relative;\n    background: 0;\n    border: 1px solid #409eff;\n    color: #409eff;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/equipment/equipmentCharts.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content-bg\"},[_c('div',{staticClass:\"top-title\"},[_c('span',{staticClass:\"goBack\",on:{\"click\":function($event){return _vm.goBack()}}},[_vm._v(\"返回\")]),_vm._v(\" \"),_c('b',[_vm._v(_vm._s(_vm.equipmentName)+\"统计\")]),_vm._v(\" \"),_c('span')]),_vm._v(\" \"),_c('ul',{staticClass:\"count-wapper\"},[_c('li',[_c('div',{staticClass:\"count-tit\"},[_vm._v(\"日志总数\")]),_vm._v(\" \"),_c('div',{staticClass:\"count-val\"},[_vm._v(_vm._s(_vm.logsCount))])]),_vm._v(\" \"),_c('li',[_c('div',{staticClass:\"count-tit\"},[_vm._v(\"ERROR日志\")]),_vm._v(\" \"),_c('div',{staticClass:\"count-val err-val\"},[_vm._v(_vm._s(_vm.errorLogsCount))])]),_vm._v(\" \"),_c('li',[_c('div',{staticClass:\"count-tit\"},[_vm._v(\"事件总数\")]),_vm._v(\" \"),_c('div',{staticClass:\"count-val\"},[_vm._v(_vm._s(_vm.eventCount))])]),_vm._v(\" \"),_c('li',[_c('div',{staticClass:\"count-tit\"},[_vm._v(\"高危事件\")]),_vm._v(\" \"),_c('div',{staticClass:\"count-val err-val\"},[_vm._v(_vm._s(_vm.dangerEventCount))])])]),_vm._v(\" \"),_c('div',{staticClass:\"item-wapper\"},[_c('div',{staticClass:\"item-title\"},[_vm._v(\"每小时日志数量统计\\n      \"),_c('el-date-picker',{staticClass:\"time-wapper\",attrs:{\"value-format\":\"yyyy-MM-dd\",\"size\":\"mini\",\"type\":\"date\",\"editable\":_vm.editable,\"placeholder\":\"选择日期\"},on:{\"change\":_vm.dateChange1},model:{value:(_vm.currentDateVal1),callback:function ($$v) {_vm.currentDateVal1=$$v},expression:\"currentDateVal1\"}})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading1),expression:\"loading1\"}],staticClass:\"item-content\",attrs:{\"element-loading-background\":\"rgba(48, 62, 78, 0.5)\"}},[_c('v-echarts',{attrs:{\"echartType\":\"line\",\"echartData\":this.hourLogsCountData}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"item-wapper\"},[_c('div',{staticClass:\"item-title\"},[_vm._v(\"每小时事件数量统计\\n      \"),_c('el-date-picker',{staticClass:\"time-wapper\",attrs:{\"value-format\":\"yyyy-MM-dd\",\"size\":\"mini\",\"editable\":_vm.editable,\"type\":\"date\",\"placeholder\":\"选择日期\"},on:{\"change\":_vm.dateChange2},model:{value:(_vm.currentDateVal2),callback:function ($$v) {_vm.currentDateVal2=$$v},expression:\"currentDateVal2\"}})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading2),expression:\"loading2\"}],staticClass:\"item-content\",attrs:{\"element-loading-background\":\"rgba(48, 62, 78, 0.5)\"}},[_c('v-echarts',{attrs:{\"echartType\":\"moreline\",\"echartData\":this.hourEventCountData}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"item-wapper\"},[_c('div',{staticClass:\"item-title\"},[_vm._v(\"日志级别数量统计\\n      \"),_c('el-date-picker',{staticClass:\"time-wapper\",attrs:{\"value-format\":\"yyyy-MM-dd\",\"size\":\"mini\",\"editable\":_vm.editable,\"type\":\"date\",\"placeholder\":\"选择日期\"},on:{\"change\":_vm.dateChange3},model:{value:(_vm.currentDateVal3),callback:function ($$v) {_vm.currentDateVal3=$$v},expression:\"currentDateVal3\"}})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading3),expression:\"loading3\"}],staticClass:\"item-content\",attrs:{\"element-loading-background\":\"rgba(48, 62, 78, 0.5)\"}},[_c('v-echarts',{attrs:{\"echartType\":\"bar\",\"echartData\":this.logTypeData}})],1)]),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading4),expression:\"loading4\"}],staticClass:\"item-wapper\",attrs:{\"element-loading-background\":\"rgba(48, 62, 78, 0.5)\"}},[_c('div',{staticClass:\"item-title\"},[_vm._v(\"事件类型数量统计\\n      \"),_c('el-date-picker',{staticClass:\"time-wapper\",attrs:{\"value-format\":\"yyyy-MM-dd\",\"size\":\"mini\",\"editable\":_vm.editable,\"type\":\"date\",\"placeholder\":\"选择日期\"},on:{\"change\":_vm.dateChange4},model:{value:(_vm.currentDateVal4),callback:function ($$v) {_vm.currentDateVal4=$$v},expression:\"currentDateVal4\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"item-content\"},[_c('v-echarts',{attrs:{\"echartType\":\"bar\",\"echartData\":this.eventTypeData}})],1),_vm._v(\" \"),_c('div',{staticClass:\"item-content\"},[_c('v-echarts',{attrs:{\"echartType\":\"pie\",\"echartData\":this.eventTypeData2}})],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1a655dcc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/equipment/equipmentCharts.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1a655dcc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./equipmentCharts.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./equipmentCharts.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./equipmentCharts.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1a655dcc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./equipmentCharts.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1a655dcc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/equipment/equipmentCharts.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}